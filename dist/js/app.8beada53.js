(function(e){function t(t){for(var a,s,o=t[0],u=t[1],c=t[2],m=0,d=[];m<o.length;m++)s=o[m],i[s]&&d.push(i[s][0]),i[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},i={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/imgalign/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("1356"),i=r.n(a);i.a},"060e":function(e,t,r){},"08f9":function(e,t,r){"use strict";var a=r("1df0"),i=r.n(a);i.a},1106:function(e,t,r){"use strict";var a=r("5ef7"),i=r.n(a);i.a},"11a7":function(e,t,r){},1356:function(e,t,r){},"1df0":function(e,t,r){},"355c":function(e,t,r){},"3eaf":function(e,t,r){e.exports=r.p+"img/ms1.0741a591.jpg"},5353:function(e,t,r){"use strict";var a=r("060e"),i=r.n(a);i.a},5403:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),i=(r("d1e7"),r("bb71"));r("da64");a["a"].use(i["a"],{iconfont:"md"});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",[r("v-content",[r("v-container",{attrs:{"pl-0":"","pr-0":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",[r("div",{attrs:{id:"nav"}},[r("app-navbar",{attrs:{busyWorker:e.$store.getters["worker/busy"],busyInput:e.busyInput,workerReady:e.$store.getters["worker/ready"]}})],1),r("router-view")],1)],1)],1)],1)],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-navigation-drawer",{attrs:{app:"","disable-resize-watcher":"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[e._l(e.navItems,function(t){return[r("v-list-tile",{key:t.title,attrs:{to:t.componentName?{name:t.componentName}:null,color:t.errorColor?t.errorColor:void 0},on:{click:function(r){e.itemClicked(t)}}},[r("v-list-tile-action",[t.isSvg?r("v-layout",[r("img",{attrs:{src:t.icon,alt:"logo",width:"20px"}})]):r("v-icon",[e._v("\n              "+e._s(t.icon)+"\n            ")])],1),r("v-list-tile-content",[r("v-list-tile-title",{domProps:{textContent:e._s(t.title)}})],1)],1),r("v-divider",{key:t.title+"_2"})]})],2)],1),r("v-toolbar",{attrs:{app:"",flat:"",dark:"",dense:""}},[e.$vuetify.breakpoint.smAndUp?void 0:e._e(),e._l(e.itemsLeft,function(t){return r("v-btn",{key:t.title,attrs:{flat:"",to:t.componentName?{name:t.componentName}:null},on:{click:function(r){e.itemClicked(t)}}},[e._v("\n      "+e._s(t.title)+"\n    ")])}),e.$vuetify.breakpoint.xsOnly?[r("v-toolbar-title",{staticClass:"title"},[e._v(e._s(e.routeTitle))])]:e._e(),e.$vuetify.breakpoint.smAndUp?r("v-toolbar-items",[e._l(e.itemsRight,function(t){return r("v-btn",{key:t.title,attrs:{flat:"",to:t.componentName?{name:t.componentName}:null,color:t.errorColor?t.errorColor:void 0},on:{click:function(r){e.itemClicked(t)}}},[e._v("\n        "+e._s(t.title)+"\n      ")])}),e.busy?r("v-layout",{attrs:{"align-center":""}},[r("app-spinner",{attrs:{color:e.busyColor}})],1):e._e()],2):e._e(),r("p",{staticStyle:{"padding-top":"1%",color:"rgba(255,255,255,0.5)"}},[e._v("This part of the application is based on the "),r("a",{attrs:{target:"_blank",href:"https://github.com/latsic/imgalign"}},[e._v("imgAlign Github Project")])]),e.$vuetify.breakpoint.xsOnly?[r("v-spacer"),r("v-toolbar-items",[e.busy?r("v-layout",{attrs:{"align-center":""}},[r("app-spinner",{attrs:{color:e.busyColor}})],1):r("v-layout",{attrs:{"align-center":""}},[r("img",{attrs:{src:e.logo,alt:"logo",width:"30px"}})])],1)]:e._e()],2)],1)},u=[],c=(r("7f7f"),r("5d73")),l=r.n(c),m=r("75fc"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sk-fading-circle",style:e.cssProps},[r("div",{staticClass:"sk-circle1 sk-circle"}),r("div",{staticClass:"sk-circle2 sk-circle"}),r("div",{staticClass:"sk-circle3 sk-circle"}),r("div",{staticClass:"sk-circle4 sk-circle"}),r("div",{staticClass:"sk-circle5 sk-circle"}),r("div",{staticClass:"sk-circle6 sk-circle"}),r("div",{staticClass:"sk-circle7 sk-circle"}),r("div",{staticClass:"sk-circle8 sk-circle"}),r("div",{staticClass:"sk-circle9 sk-circle"}),r("div",{staticClass:"sk-circle10 sk-circle"}),r("div",{staticClass:"sk-circle11 sk-circle"}),r("div",{staticClass:"sk-circle12 sk-circle"})])},p=[],g={props:{color:{type:String,default:"#333"}},computed:{cssProps:function(){return{"--bg-color":this.color}}}},h=g,f=(r("7a39"),r("2877")),y=Object(f["a"])(h,d,p,!1,null,"a8f1c520",null);y.options.__file="Spinner.vue";var v=y.exports,b=r("a2ac"),w=r.n(b),I={components:{AppSpinner:v},props:{busyWorker:{type:Boolean,default:!1},workerReady:{type:Boolean,default:!0},busyInput:{type:Boolean,default:!1}},data:function(){return{drawer:!1,appTitle:"Image Aligner"}},computed:{itemsLeft:function(){return[{title:"MultiStitcher",componentName:"multistitcher",func:null,icon:"burst_mode"},{title:"Settings",componentName:"settings",func:null,icon:"burst_mode"}]},itemsRight:function(){return[]},nonNavItems:function(){return[]},navItems:function(){return[].concat(Object(m["a"])(this.itemsLeft),Object(m["a"])(this.itemsRight))},allItems:function(){return[].concat(Object(m["a"])(this.itemsXsOnly),Object(m["a"])(this.itemsLeft),Object(m["a"])(this.itemsRight),Object(m["a"])(this.nonNavItems))},routeTitle:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=l()(this.allItems);!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.componentName==this.$route.name)return n.title}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return""},nonNavRouteTitle:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=l()(this.nonNavItems);!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.componentName==this.$route.name&&n.title)return n.title}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return null},busy:function(){return this.busyWorker||this.busyInput},busyColor:function(){return this.busyWorker||!this.workerReady?this.$vuetify.theme.accent:this.$vuetify.theme.error},logo:function(){return w.a}},methods:{itemClicked:function(e){e.func&&e.func()},relatedItem:function(e){return this.relatedItems[e]}}},_=I,x=r("6544"),k=r.n(x),S=r("8336"),D=r("ce7e6"),T=r("132d"),A=r("a722"),O=r("8860"),V=r("ba95"),C=r("40fe"),R=r("5d23"),j=r("f774"),F=r("9910"),P=r("71d9"),M=r("2a7f"),N=Object(f["a"])(_,o,u,!1,null,"0258328c",null);N.options.__file="Navbar.vue";var $=N.exports;k()(N,{VBtn:S["a"],VDivider:D["a"],VIcon:T["a"],VLayout:A["a"],VList:O["a"],VListTile:V["a"],VListTileAction:C["a"],VListTileContent:R["a"],VListTileTitle:R["b"],VNavigationDrawer:j["a"],VSpacer:F["a"],VToolbar:P["a"],VToolbarItems:M["a"],VToolbarTitle:M["b"]});r("a481"),r("f559");var L=r("d225"),E=r("b0b4"),B=r("67bb"),q=r.n(B),z=q()(),U=q()(),G=function(){function e(t){if(Object(L["a"])(this,e),t!=U)throw"Cannot construct Singleton!";this._infoOn=function(){return!0},this._errorOn=function(){return!0},this._assertOn=function(){return!0},this._externOn=function(){return!0},this._consoleStdLog=console.log,this._consoleStdInfo=console.info,this._consoleStdError=console.error,this._consoleStdAssert=console.assert,console.log=this.log.bind(this),console.info=this.info.bind(this),console.error=this.error.bind(this),console.assert=this.assert.bind(this)}return Object(E["a"])(e,[{key:"log",value:function(){if(this._userInfoFn){var e=this.userInfo.apply(this,arguments);e&&this._userInfoFn(e)}if(this._otherLogErrorFn&&this._errorOn()){var t=this.externErrorMessage.apply(this,arguments);t&&this.logOtherError(t)}this._externOn()&&this.isExtern.apply(this,arguments)?(this._consoleStdLog.apply(this,arguments),this.logOther.apply(this,arguments)):this._infoOn()&&(this._consoleStdLog.apply(this,arguments),this.logOther.apply(this,arguments))}},{key:"error",value:function(){this._errorOn()&&(!this._externOn()&&this.isExtern.apply(this,arguments)||(this._consoleStdError.apply(this,arguments),this.logOtherError.apply(this,arguments)))}},{key:"assert",value:function(){this._assertOn()&&(!this._externOn()&&this.isExtern.apply(this,arguments)||(this._consoleStdAssert.apply(this,arguments),this.logOther.apply(this,arguments)))}},{key:"info",value:function(){this._externOn()&&this.isExtern.apply(this,arguments)?(this._consoleStdInfo.apply(this,arguments),this.logOther.apply(this,arguments)):this._infoOn()&&(this._consoleStdInfo.apply(this,arguments),this.logOther.apply(this,arguments))}},{key:"isExtern",value:function(){return arguments.length>0&&"opencv"==arguments[0]}},{key:"userInfo",value:function(){if(0==arguments.length)return null;for(var e="",t=0;t<arguments.length;++t)e?e+=" "+arguments[t]:"string"==typeof arguments[t]&&arguments[t].startsWith("user-info ")&&(e=arguments[t].replace("user-info ",""));return e}},{key:"externErrorMessage",value:function(){if(0==arguments.length)return null;for(var e="",t=0;t<arguments.length;++t)e?e+=" "+arguments[t]:"string"==typeof arguments[t]&&arguments[t].startsWith("user-error ")&&(e=arguments[t].replace("user-error ",""));return e}},{key:"logOther",value:function(){if(this._otherLogFn){var e="",t=!0,r=!1,a=void 0;try{for(var i,n=l()(arguments);!(t=(i=n.next()).done);t=!0){var s=i.value;e+=s+" "}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}this._otherLogFn(e)}}},{key:"logOtherError",value:function(){if(this._otherLogErrorFn){var e="",t=!0,r=!1,a=void 0;try{for(var i,n=l()(arguments);!(t=(i=n.next()).done);t=!0){var s=i.value;e+=s+" "}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}this._otherLogErrorFn(e)}}}],[{key:"init",value:function(t,r,a,i,n,s,o){this[z]||(this[z]=new e(U)),this[z]._infoOn=t,this[z]._errorOn=r,this[z]._assertOn=a,this[z]._externOn=i,this[z]._otherLogFn=n,this[z]._otherLogErrorFn=s,this[z]._userInfoFn=o}}]),e}(),W=r("a4bb"),K=r.n(W),Y=(r("7514"),r("15b8")),H=r.n(Y),X=H()({other:{id:1001,name:"Other"},sift:{id:1002,name:"Sift"},surf:{id:1003,name:"Surf"},orb:{id:1004,name:"Orb"},brisk:{id:1005,name:"Brisk"},kaze:{id:1006,name:"Kaze"},akaze:{id:1007,name:"Akaze"},basic:{id:1008,name:"Basic"},compare:{id:1009,name:"Compare"},matchFilter:{id:1010,name:"Match Filter"},logging:{id:1011,name:"Logging"},stitching:{id:1012,name:"Stitching"},stitcherCommon:{id:1013,name:"Common"},stitcherOrientation:{id:1014,name:"Orientation"},stitcherProjection:{id:1015,name:"Projection"},multiStitcher:{id:1016,name:"Multi Stitcher"},multiStitcherCamera:{id:1017,name:"Camera"},multiStitcherSeams:{id:1018,name:"Seams"},multiStitcherImage:{id:1019,name:"Image"},multiStitcherStitchOrder:{id:1020,name:"Experimental"},multiStitcherMemory:{id:1021,name:"Memory"},multiStitcherConfidence:{id:1022,name:"Confidence"},main:{id:1023,name:"Main"},imageInput:{id:1024,name:"Image Input"}}),J=200,Q=201,Z=202,ee=203,te=301,re=302,ae=303,ie=304,ne=305,se=583,oe=591,ue=577,ce=610,le=810,me=H()({imageCapInput:{id:11,name:"Input images image cap",groupId:X.imageInput.id},imageCap:{id:10,name:"Image cap for detector",groupId:X.imageInput.id},openCvType:{id:le,name:"OpenCV type",groupId:X.main.id},openCvType_fast:{id:811,name:"Fast",groupId:le},openCvType_small:{id:812,name:"Small",groupId:le},sift_featuresN:{id:20,name:"Max feature count",groupId:X.sift.id},sift_octaveLayersN:{id:21,name:"Number of octave layers",groupId:X.sift.id},sift_contrastThresh:{id:22,name:"Contrast threshold",groupId:X.sift.id},sift_edgeThresh:{id:23,name:"Edge threshold",groupId:X.sift.id},sift_sigma:{id:24,name:"Sigma",groupId:X.sift.id},surf_hessianThresh:{id:30,name:"Hessian threshold",groupId:X.surf.id},surf_octavesN:{id:31,name:"Number of octaves",groupId:X.surf.id},surf_octaveLayersN:{id:32,name:"Number of octave layers",groupId:X.surf.id},surf_extended:{id:33,name:"64/128 bit descriptor",groupId:X.surf.id},orb_featuresN:{id:40,name:"Max feature count",groupId:X.orb.id},orb_scale:{id:41,name:"Scale",groupId:X.orb.id},orb_levelsN:{id:42,name:"Number of levels",groupId:X.orb.id},orb_edgeThresh:{id:43,name:"Edge threshold",groupId:X.orb.id},orb_patchSize:{id:44,name:"Patch size",groupId:X.orb.id},brisk_thresh:{id:50,name:"Threshold",groupId:X.brisk.id},brisk_octavesN:{id:51,name:"Number of octaves",groupId:X.brisk.id},brisk_patternScale:{id:52,name:"Pattern scale",groupId:X.brisk.id},kaze_thresh:{id:53,name:"Threshold",groupId:X.kaze.id},kaze_octavesN:{id:54,name:"Number of octaves",groupId:X.kaze.id},kaze_octaveLayersN:{id:55,name:"Number of octave layers",groupId:X.kaze.id},akaze_thresh:{id:56,name:"Threshold",groupId:X.akaze.id},akaze_octavesN:{id:57,name:"Number of octaves",groupId:X.akaze.id},akaze_octaveLayersN:{id:58,name:"Number of octave layers",groupId:X.akaze.id},detType_sift:{id:60,name:"Sift",groupId:J},detType_surf:{id:61,name:"Surf",groupId:J},detType_orb:{id:62,name:"Orb",groupId:J},detType_brisk:{id:63,name:"Brisk",groupId:J},detType_kaze:{id:64,name:"Kaze",groupId:J},detType_akaze:{id:65,name:"Akaze",groupId:J},desType_sift:{id:80,name:"Sift",groupId:Q},desType_surf:{id:81,name:"Surf",groupId:Q},desType_orb:{id:82,name:"Orb",groupId:Q},desType_brisk:{id:83,name:"Brisk",groupId:Q},desType_freak:{id:84,name:"Freak",groupId:Q},desType_kaze:{id:85,name:"Kaze",groupId:Q},desType_akaze:{id:86,name:"Akaze",groupId:Q},matcherType_flann:{id:100,name:"Flann",groupId:Z},matcherType_bfhamming:{id:101,name:"Brute force hamming",groupId:Z},matcherType_bfhamming2:{id:102,name:"Brute force hamming 2",groupId:Z},matcherType_auto:{id:103,name:"Auto",groupId:Z},transformFinderType_ransac:{id:120,name:"Ransac",groupId:ee},transformFinderType_rho:{id:121,name:"Rho",groupId:ee},transformFinderType_lmeds:{id:122,name:"Lmeds",groupId:ee},detType:{id:J,name:"Detector",groupId:X.basic.id},desType:{id:Q,name:"Descriptor",groupId:X.basic.id},matcherType:{id:Z,name:"Matcher",groupId:X.basic.id},transformFinderType:{id:ee,name:"Transform finder",groupId:X.basic.id},compareDetTypes:{id:te,name:"Choose detectors",groupId:X.compare.id},compareImageType:{id:re,name:"Choose image",groupId:X.compare.id},imageFirst:{id:130,name:"First image",groupId:re},imageSecond:{id:131,name:"Second image",groupId:re},matchFilterSpreadAuto:{id:140,name:"Spread factor automatic",groupId:X.matchFilter.id},matchFilterSpreadFactor:{id:141,name:"Spread factor",groupId:X.matchFilter.id,disabledIfId:140},matchFilterMinMatchesToRetain:{id:142,name:"Min match count",groupId:X.matchFilter.id},matchFilterMaxMatchesToRetain:{id:143,name:"Max match count",groupId:X.matchFilter.id},floodFillTolerance:{id:150,name:"Flood fill tolerance",groupId:X.other.id},alignSelectionOverlay:{id:151,name:"Overlay selection",groupId:X.other.id},logInfoEnabled:{id:152,name:"Verbose logging",groupId:X.logging.id},logErrorEnabled:{id:153,name:"Log errors",groupId:X.logging.id},logAssertEnabled:{id:154,name:"Log assertions",groupId:X.logging.id},logExternEnabled:{id:155,name:"Log extern messages",groupId:X.logging.id},stitch_projection:{id:ae,name:"Surface projection 1",groupId:X.stitcherProjection.id},stitch_projection2:{id:ie,name:"Surface projection 2",groupId:X.stitcherProjection.id},stitch_seamBlend:{id:501,name:"Seam blend",groupId:X.stitcherCommon.id},stitch_colorTransfer:{id:502,name:"Color transfer",groupId:X.stitcherCommon.id},stitch_fieldOfView1:{id:511,name:"Field of view 1",groupId:X.stitcherOrientation.id},stitch_yaw1:{id:513,name:"Yaw 1",groupId:X.stitcherOrientation.id},stitch_pitch1:{id:514,name:"Pitch 1",groupId:X.stitcherOrientation.id},stitch_fieldOfView2:{id:521,name:"Field of view 2",groupId:X.stitcherOrientation.id},stitch_yaw2:{id:523,name:"Yaw 2",groupId:X.stitcherOrientation.id},stitch_pitch2:{id:524,name:"Pitch 2",groupId:X.stitcherOrientation.id},stitch_yaw2Auto:{id:525,name:"Yaw 2 auto",groupId:null},stitch_pitch2Auto:{id:526,name:"Pitch 2 auto",groupId:null},stitch_projectionTypeNone:{id:561,name:"None",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeSpherical:{id:553,name:"Spherical",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeCylindrical:{id:552,name:"Cylindrical",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeMercator:{id:559,name:"Mercator ",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeTransverseMercator:{id:560,name:"Transverse Mercator",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeFisheye:{id:554,name:"Fisheye",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypePlane:{id:550,name:"Plane",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeAffine:{id:551,name:"Affine",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeStereographic:{id:555,name:"Stereographic",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeRectilinear:{id:556,name:"Rectilinear",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeRectilinearPortrait:{id:557,name:"Rectilinear portrait",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypePanini:{id:558,name:"Panini",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeRectilinearA2B1:{id:562,name:"Rectilinear A2B1",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypeRectilinearPortraitA2B1:{id:563,name:"Rectilinear p. A2B1",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypePaniniA2B1:{id:564,name:"Panini A2B1",groupId:ae,groupId2:ie,groupId3:ne},stitch_projectionTypePaniniPortraitA2B1:{id:565,name:"Panini portrait A2B1",groupId:ae,groupId2:ie,groupId3:ne},bat_none:{id:701,name:"None",groupId:se},bat_ray:{id:702,name:"Ray",groupId:se},bat_rayBlacklist:{id:703,name:"Ray blacklist",groupId:se},bat_rayConfidenceStep:{id:704,name:"Ray step confidence",groupId:se},bat_rayMinTiles:{id:705,name:"Ray min. tiles",groupId:se},bat_reproj:{id:706,name:"Reprojection",groupId:se},bat_reprojCap200:{id:707,name:"Reproj. cap 200",groupId:se},bat_reprojMinTiles:{id:708,name:"Reproj. min. tiles",groupId:se},bat_reprojNoCam:{id:709,name:"Reproj. nce",groupId:se},bat_reprojNoCamCap200:{id:710,name:"Reproj. nce 200",groupId:se},waveCorrectionType_A:{id:611,name:"Auto",groupId:ce},waveCorrectionType_N:{id:612,name:"None",groupId:ce},waveCorrectionType_H:{id:613,name:"Horizontal",groupId:ce},waveCorrectionType_V:{id:614,name:"Vertical",groupId:ce},blendType_none:{id:574,name:"None",groupId:oe},blendType_multiBand:{id:575,name:"Multiband",groupId:oe},blendType_feather:{id:576,name:"Feather",groupId:oe},seamFinderType_Vornoi:{id:578,name:"Vornoi",groupId:ue},seamFinderType_Graphcut:{id:579,name:"Graphcut (slow)",groupId:ue},multiStitch_projectionType:{id:ne,name:"Surface projection",groupId:X.multiStitcherCamera.id},multiStitch_bundleAdjust:{id:se,name:"Bundle adjustement type",groupId:X.multiStitcherCamera.id},multiStitch_waveCorrection:{id:ce,name:"Wave correction",groupId:X.multiStitcherCamera.id},multiStitch_camEstimate:{id:582,name:"Cam estimation",groupId:X.multiStitcherCamera.id},multiStitch_maxRectangle:{id:603,name:"Crop to max rect",groupId:X.multiStitcherImage.id},multiStitch_exposureCompensator:{id:590,name:"Exp compens. (slow)",groupId:X.multiStitcherImage.id},multiStitch_colorTransfer:{id:586,name:"Color transfer",groupId:X.multiStitcherImage.id},multiStitch_seamBlend:{id:585,name:"Seam blend",groupId:X.multiStitcherSeams.id},multiStitch_blendStrength:{id:592,name:"Blend strength",groupId:X.multiStitcherSeams.id,enabledIfId:585},multiStitch_seamFinderType:{id:ue,name:"Seam finder",groupId:X.multiStitcherSeams.id},multiStitch_warpFirst:{id:580,name:"Warp first",groupId:X.multiStitcherStitchOrder.id},multiStitch_calcCenterImage:{id:588,name:"Estimate start image",groupId:X.multiStitcherStitchOrder.id,enabledIfId:580},multiStitch_rectifyPerspective:{id:581,name:"Rectify perspective",groupId:X.multiStitcherStitchOrder.id},multiStitch_rectifyStretch:{id:593,name:"Rectify stretch",groupId:X.multiStitcherStitchOrder.id,enabledIfId:581},multiStitch_confidenceThresh:{id:589,name:"Thresh stitching",groupId:X.multiStitcherConfidence.id},multiStitch_inputImagesMatchReach:{id:720,name:"Image match reach",groupId:X.multiStitcherConfidence.id},multiStitch_preserveAlphaChannelValue:{id:600,name:"Preserve Alpha Channel",groupId:X.multiStitcherMemory.id},multiStitch_disposeInputImages:{id:598,name:"Dispose input before stitching",groupId:X.multiStitcherMemory.id},multiStitch_limitResultPreview:{id:596,name:"Max result view size",groupId:X.multiStitcherMemory.id},multiStitch_limitInputView:{id:597,name:"Max input view size",groupId:X.multiStitcherMemory.id},multiStitch_limitLiveStitchingPreview:{id:599,name:"Max temp result size",groupId:X.multiStitcherMemory.id},multiStitch_liveUpdateCycle:{id:601,name:"Live update cycle",groupId:X.multiStitcherMemory.id}}),de=H()([{id:me.sift_featuresN.id,text:"The number of best features to retain (may include location duplicates). The features are ranked by their scores (measured in SIFT algorithm as the local contrast). Value 0 => Automatic."},{id:me.sift_octaveLayersN.id,text:"The number of layers in each octave. 3 is the value used in D. Lowe paper. The number of octaves is computed automatically from the image resolution."},{id:me.sift_contrastThresh.id,text:"The contrast threshold used to filter out weak features in semi-uniform (low-contrast) regions. The larger the threshold, the less features are produced by the detector."},{id:me.sift_edgeThresh.id,text:"The threshold used to filter out edge-like features. Note that the its meaning is different from the contrastThreshold, i.e. the larger the edgeThreshold, the less features are filtered out (more features are retained)."},{id:me.sift_sigma.id,text:"The sigma of the Gaussian applied to the input image at the octave. If your image is captured with a weak camera with soft lenses, you might want to reduce the number."},{id:me.surf_hessianThresh.id,text:"Threshold for hessian keypoint detector."},{id:me.surf_octavesN.id,text:"Number of pyramid octaves the keypoint detector will use."},{id:me.surf_octaveLayersN.id,text:"Number of octave layers within each octave."},{id:me.surf_extended.id,text:"On - use extended 128-element descriptors, off - use 64-element descriptors."},{id:me.orb_featuresN.id,text:"The maximum number of features to retain."},{id:me.orb_scale.id,text:"Pyramid decimation ratio, greater than 1. scaleFactor==2 means the classical pyramid, where each next level has 4x less pixels than the previous, but such a big scale factor will degrade feature matching scores dramatically. On the other hand, too close to 1 scale factor will mean that to cover certain scale range you will need more pyramid levels and so the speed will suffer."},{id:me.orb_levelsN.id,text:"The number of pyramid levels."},{id:me.orb_edgeThresh.id,text:"This is size of the border where the features are not detected. It should NaN"},{id:me.orb_patchSize.id,text:"size of the patch used by the oriented BRIEF descriptor. Of course, on smaller pyramid layers the perceived image area covered by a feature will be larger."},{id:me.brisk_thresh.id,text:"AGAST detection threshold score."},{id:me.brisk_octavesN.id,text:"Detection octaves. Use 0 to do single scale."},{id:me.brisk_patternScale.id,text:"Apply this scale to the pattern used for sampling the neighbourhood of a keypoint."},{id:me.kaze_thresh.id,text:"Detector response threshold to accept point."},{id:me.kaze_octavesN.id,text:"Maximum octave evolution of the image."},{id:me.kaze_octaveLayersN.id,text:"Default number of sublevels per scale level."},{id:me.akaze_thresh.id,text:"Detector response threshold to accept point."},{id:me.akaze_octavesN.id,text:"Maximum octave evolution of the image."},{id:me.akaze_octaveLayersN.id,text:"Default number of sublevels per scale level."},{id:me.matchFilterSpreadAuto.id,text:"If enabled, the spread factor will be chosen automatically."},{id:me.matchFilterSpreadFactor.id,text:"When two detected features are compared, a match distance is calculated. The larger this distance, the less similar the features are. The spread factor is a value to influence how large the distance between two features can be, while the features are still considered to be a good match."},{id:me.matchFilterMinMatchesToRetain.id,text:"The minimum number of matches to retain (if possible). These matches are then used to align the image to the template image (calculation of the homography matrix)."},{id:me.matchFilterMaxMatchesToRetain.id,text:"The maximum number of matches to retain. These matches are then used to align the image to the template image (calculation of the homography matrix)."},{id:me.floodFillTolerance.id,text:"Tolerance value for the flood fill algorithm. After matching two images,  and selecting one or multiple points in an input image, a flood fill image  can be calculated via the select menu."},{id:me.alignSelectionOverlay.id,text:"Overlay the aligned selection onto the template image."},{id:me.logInfoEnabled.id,text:"Enabled or disable verbose console logging."},{id:me.logErrorEnabled.id,text:"Enabled or disable logging of errors."},{id:me.logAssertEnabled.id,text:"Enabled or disable logging of assertions."},{id:me.logExternEnabled.id,text:"Enabled or disable logging of extern messages."},{id:me.imageCap.id,text:"The maxium number of pixels for feature detection. If an image is larger it will be resized before the feature detection runs. This has an impact on the amount of time feature detection consumes."},{id:me.imageCapInput.id,text:"The maxium size of input images in pixels"},{id:me.stitch_projection.id,text:"Surface projection for template image."},{id:me.stitch_projection2.id,text:"Surface projection for image to align."},{id:me.stitch_seamBlend.id,text:"Blend seam between images."},{id:me.stitch_colorTransfer.id,text:"Try to adjust the colors of the image to align to the colors of the templte image. Does not work for black and white images."},{id:me.stitch_fieldOfView1.id,text:"Field of view in the degrees of the template image. Leave empty to use default value or data from image meta data if available."},{id:me.stitch_yaw1.id,text:"Horizontal orientation of template image in degrees. Leave empty to use default value."},{id:me.stitch_pitch1.id,text:"Vertical orientation of template image in degrees. Leave empty to use default value."},{id:me.stitch_fieldOfView2.id,text:"Field of view in the degrees of the image to align. Leave empty to use default value or data from image meta data if available."},{id:me.stitch_yaw2.id,text:"Horizontal orientation of the image to align in degrees. Leave empty to use default value."},{id:me.stitch_pitch2.id,text:"Vertical orientation of the image to align in degrees. Leave empty to use default value."},{id:me.stitch_yaw2Auto.id,text:"Unused."},{id:me.stitch_pitch2Auto.id,text:"Unused."},{id:me.multiStitch_projectionType.id,text:"Surface projection."},{id:me.multiStitch_bundleAdjust.id,text:"Bundle adjustement type. Automatically refines initial camera parameters."},{id:me.multiStitch_camEstimate.id,text:"Tries to guess camera paramters (focal length and rotation)Rotation parameters are only used if bundle adjustement is enabled."},{id:me.multiStitch_waveCorrection.id,text:"Tries to straighten a curved panorama/horizon."},{id:me.multiStitch_colorTransfer.id,text:"Tries to adjust the colors of the images with the purpose that all images have the same color tone. The first image in the stitching pipeline is used as template. This usually does not work with with black and white images."},{id:me.multiStitch_calcCenterImage.id,text:"Calculate a center image and start stitching from there."},{id:me.multiStitch_confidenceThresh.id,text:"When calculating a mapping between two images, a confidence value indicates how good the mapping is. Mappings with a confidence value lower than this value are dismissed."},{id:me.multiStitch_limitResultPreview.id,text:'To save memory, the display stitched result image may be shown only in a reduced resolution. The full resolution image can still be saved via the "save image button".'},{id:me.multiStitch_limitInputView.id,text:"To save memory, the displayed input images may be resized and displayed with a lower resolution. This has no influence on the final stitching result."},{id:me.multiStitch_disposeInputImages.id,text:"To save memory, before the stitching process is started, all input images are disposed and only a small preview is kept. This has no influence on the final stitching result. If the stitching process is restarted with the same images though, the images will have to be reloaded (this is done automatically)."},{id:me.multiStitch_limitLiveStitchingPreview.id,text:"To save memory and increase performance, the preview during stitching can be reduces in size.This has no influence on the final stitching result."},{id:me.multiStitch_preserveAlphaChannelValue.id,text:"To save memory while blending, preserving of alpha channel values can be disabled.The final stitching result is only influeces if images containing non opaque areas are stitched together."},{id:me.multiStitch_inputImagesMatchReach.id,text:"Considers the order of input images. Two images are only considered for a match if the index distance is lower or equal than this value. A value of 0 is interpreted as infinite value. Example: The input image at position 3 and the input images at position 7 have an index distance of 4."}]),pe=function(){function e(){Object(L["a"])(this,e)}return Object(E["a"])(e,null,[{key:"_getParam",value:function(e){var t=K()(me).find(function(t){return me[t].id==e});if(!t)throw new Error("No param with id ".concat(e," exists"));return me[t]}},{key:"getParamName",value:function(e){return this._getParam(e).name}},{key:"getParamGroupId",value:function(e){return this._getParam(e).groupId}},{key:"getParamText",value:function(e){var t=de.find(function(t){return t.id==e});return t?t.text:""}},{key:"getParamEnabledIfId",value:function(e){var t=this._getParam(e);return t&&t.enabledIfId?t.enabledIfId:null}},{key:"getParamDisabledIfId",value:function(e){var t=this._getParam(e);return t&&t.disabledIfId?t.disabledIfId:null}}]),e}(),ge=H()({discrete:1,multiple:2,range:3,rangeSquareRoot:4,number:5,bool:6,numberAuto:7}),he={components:{appNavbar:$},created:function(){var e=this;this.$store.dispatch("settings/init"),G.init(function(){return e.$store.getters["settings/param"](me.logInfoEnabled.id)},function(){return e.$store.getters["settings/param"](me.logErrorEnabled.id)},function(){return e.$store.getters["settings/param"](me.logAssertEnabled.id)},function(){return e.$store.getters["settings/param"](me.logExternEnabled.id)},function(t){return e.$store.commit("logs/addMessage",t)},function(t){return e.$store.commit("logs/addErrorMessage",t)},function(t){return e.$store.commit("worker/currentActionInfo",t)})},computed:{busyInput:function(){return this.$store.getters["input/busyAny"]||this.$store.getters["multiInput/busy"]||this.$store.getters["multiInput/busyLoading"]}}},fe=he,ye=(r("034f"),r("7496")),ve=r("a523"),be=r("549c"),we=r("0e8f"),Ie=Object(f["a"])(fe,n,s,!1,null,null,null);Ie.options.__file="App.vue";var _e=Ie.exports;k()(Ie,{VApp:ye["a"],VContainer:ve["a"],VContent:be["a"],VFlex:we["a"],VLayout:A["a"]});var xe=r("8c4f"),ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Settings"}},[r("template",{slot:"rightElem"},[r("div",{staticClass:"caption set-default-action",class:{"set-default-action-enabled":!e.$store.getters["settings/equalsDefault"]},style:{"white-space":"nowrap",color:e.$store.getters["settings/equalsDefault"]?e.$vuetify.theme.secondary:e.$vuetify.theme.primary,"padding-right":"0.2rem"},on:{click:function(t){e.$store.getters["settings/equalsDefault"]||e.$store.dispatch("settings/default")}}},[r("strong",[e._v("▶ Set Default")])])]),r("app-main-settings",{attrs:{params:e.params(e.groupKeyMainSettings),openCvReady:e.$store.getters["worker/ready"],openCvLoading:e.$store.getters["worker/busyLoad"]},on:{changed:e.paramChanged,"load-opencv":function(t){e.$store.dispatch("worker/reload")}}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Images input"}}),r("app-image-input-settings",{attrs:{params:e.params(e.groupKeyImageInputSettings)},on:{changed:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Feature detection/matching"}}),r("app-basic-settings",{attrs:{params:e.params(e.groupKeyBasicSettings)},on:{change:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Advanced detector/descriptor"}}),r("v-tabs",{attrs:{value:e.$store.getters["settings/activeTabIndexDetector"]||0,light:"",height:"30px",color:"#eeeeee","slider-color":"secondary"},on:{change:function(t){return e.$store.dispatch("settings/activeTabIndexDetector",t)}}},[e._l(e.groupKeysDetectorSettings,function(t,a){return r("v-tab",{key:a,attrs:{ripple:""}},[e._v("\n      "+e._s(e.paramGroupName(t))+"\n    ")])}),e._l(e.groupKeysDetectorSettings,function(t,a){return r("v-tab-item",{key:a,attrs:{lazy:""}},[r("app-detector-settings",{attrs:{params:e.params(t)},on:{changed:e.paramChanged}})],1)})],2),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Advanced match filter"}}),r("app-match-filter",{attrs:{params:e.params(e.groupKeyMatchFilter)},on:{changed:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Matcher selection settings"}}),r("app-other-settings",{attrs:{params:e.params(e.groupKeyOtherSettings)},on:{changed:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Logging settings"}}),r("app-log-settings",{attrs:{params:e.params(e.groupKeyLogSettings)},on:{changed:e.logParamChanged}})],2)},Se=[],De=(r("20d6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs11:"",sm11:"",md11:"",lg10:"",xl10:""}},[e.title?r("app-view-title",{attrs:{title:e.title}},[r("template",{slot:"leftElem"},[e._t("leftElem")],2),r("template",{slot:"rightElem"},[e._t("rightElem")],2)],2):e._e(),e._t("default")],2)],1)}),Te=[],Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[r("v-layout",{attrs:{"align-center":"","justify-start":""}},[r("h3",{staticClass:"text-xs-left"},[e._v("\n        "+e._s(e.title)+"\n      ")]),r("div",[e._t("leftElem")],2)]),r("div",{style:{position:"relative"}},[r("div",{style:{position:"absolute",top:"0",left:"0",transform:"translate(-100%, -50%)"}},[e._t("rightElem")],2)])],1),r("app-view-spacer",{attrs:{mtop:"0"}})],1)},Oe=[],Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:{"border-top":"1px solid "+e.lineColor,"margin-top":e.mtop,"margin-bottom":e.mbottom}})},Ce=[],Re={props:{mtop:{type:String,default:"1rem"},mbottom:{type:String,default:"1rem"},showLine:{type:Boolean,default:!0}},computed:{lineColor:function(){return this.showLine?this.$vuetify.theme.secondary:"#00000000"}}},je=Re,Fe=Object(f["a"])(je,Ve,Ce,!1,null,"281e50ac",null);Fe.options.__file="ViewSpacer.vue";var Pe=Fe.exports,Me={components:{appViewSpacer:Pe},props:{title:{type:String,required:!0}}},Ne=Me,$e=Object(f["a"])(Ne,Ae,Oe,!1,null,"44617d17",null);$e.options.__file="ViewTitle.vue";var Le=$e.exports;k()($e,{VLayout:A["a"]});var Ee={components:{appViewTitle:Le},props:{title:{type:String,default:null}}},Be=Ee,qe=Object(f["a"])(Be,De,Te,!1,null,null,null);qe.options.__file="ViewLayout.vue";var ze=qe.exports;k()(qe,{VFlex:we["a"],VLayout:A["a"]});var Ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-space-around":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[r("app-select",{attrs:{param:t},on:{change:e.changed}})],1)}),1)},Ge=[],We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.canRender?r("v-select",e._b({style:{margin:"0",padding:"0"},attrs:{placeholder:e.paramName(),items:e.paramMapped(),value:e.paramValue(),hint:e.paramName(),"persistent-hint":"","single-line":"","item-text":"text","item-value":"value",outline:e.outline},on:{change:e.changed},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,i=t.index;return[0===i?r("span",[e._v("\n      "+e._s(a.text)+"\n    ")]):1===i?r("span",[e._v("\n      , "+e._s(a.text)+"\n    ")]):3===e.paramValue().length?r("span",{staticClass:"caption"},[e._v("\n       ( +1 other )\n    ")]):i===e.paramValue().length-1?r("span",{staticClass:"caption"},[e._v("\n       , ( + "+e._s(e.paramValue().length-2)+" other )\n    ")]):e._e()]}}])},"v-select",e.additionalSettings(),!1)):e._e()},Ke=[],Ye=(r("28a5"),r("6b54"),r("ac6a"),{props:{param:{type:Object,required:!0},outline:{type:Boolean,default:!1}},computed:{canRender:function(){return this.param.type==ge.discrete||this.param.type==ge.multiple}},methods:{paramMapped:function(){return this.param.values.map(function(e){return{text:e.name,value:e.id}})},changed:function(e){this.param.type==ge.multiple?this.$emit("change",{id:this.param.id,value:e.toString()}):this.$emit("change",{id:this.param.id,value:e})},paramName:function(){return pe.getParamName(this.param.id)},paramValue:function(){return this.param.type==ge.discrete?{text:pe.getParamName(this.param.value),value:this.param.value}:this.paramValueMultiple()},paramValueMultiple:function(){if(0==this.param.value.length)return[];var e=this.param.value.length>1?this.param.value.split(","):[this.param.value];return e.map(function(e){return{text:pe.getParamName(+e),value:+e}})},additionalSettings:function(){return{multiple:this.param.type==ge.multiple}}}}),He=Ye,Xe=r("b56d"),Je=Object(f["a"])(He,We,Ke,!1,null,"0ba088b3",null);Je.options.__file="Select.vue";var Qe=Je.exports;k()(Je,{VSelect:Xe["a"]});var Ze={components:{AppSelect:Qe},props:{params:{type:Array,required:!0}},methods:{changed:function(e){this.$emit("change",e)}}},et=Ze,tt=Object(f["a"])(et,Ue,Ge,!1,null,"ead104d0",null);tt.options.__file="BasicSettings.vue";var rt=tt.exports;k()(tt,{VFlex:we["a"],VLayout:A["a"]});var at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.number?r("v-text-field",{attrs:{name:t.id,label:e.paramName(t.id),value:t.value,rules:[e.rules.required],type:"number",hint:e.paramText(t.id)},on:{change:function(r){return e.changed(t.id,r)}}}):e._e(),t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},it=[],nt=(r("c5f6"),{props:{params:{type:Array,required:!0}},data:function(){return{rules:{required:function(e){return e.toString().length>0&&!isNaN(Number(e))||"Required"}}}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},paramText:function(e){return pe.getParamText(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("changed",{id:e,value:r})}}}),st=nt,ot=r("b73d"),ut=r("2677"),ct=Object(f["a"])(st,at,it,!1,null,"122b81b0",null);ct.options.__file="DetectorSettings.vue";var lt=ct.exports;k()(ct,{VFlex:we["a"],VLayout:A["a"],VSwitch:ot["a"],VTextField:ut["a"]});var mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.number?r("v-text-field",{attrs:{name:t.id,label:e.paramName(t.id),value:t.value,rules:[e.rules.required],type:"number",hint:e.paramText(t.id),disabled:e.isDisabled(t)},on:{change:function(r){return e.changed(t.id,r)}}}):e._e(),t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},dt=[],pt={props:{params:{type:Array,required:!0}},data:function(){return{rules:{required:function(e){return e.toString().length>0&&!isNaN(Number(e))||"Required"}}}},computed:{valueTypes:function(){return ge}},methods:{isDisabled:function(e){var t=pe.getParamDisabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=l()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return o.value>0}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},paramName:function(e){return pe.getParamName(e)},paramText:function(e){return pe.getParamText(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("changed",{id:e,value:r})}}},gt=pt,ht=Object(f["a"])(gt,mt,dt,!1,null,"36d9ffd8",null);ht.options.__file="MatchFilter.vue";var ft=ht.exports;k()(ht,{VFlex:we["a"],VLayout:A["a"],VSwitch:ot["a"],VTextField:ut["a"]});var yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.range?r("v-slider",{style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,hint:e.paramName(t.id)+": "+t.value+" px","persistent-hint":"",max:t.range.max,min:t.range.min,step:1},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r})}}}):e._e(),t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:e.switchValue(t),"input-value":e.switchValue(t),label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r?1:0})}}}):e._e()],1)}),1)},vt=[],bt={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},paramText:function(e){return pe.getParamText(e)},switchValue:function(e){return e.value>0}}},wt=bt,It=r("ba0d"),_t=Object(f["a"])(wt,yt,vt,!1,null,"089a1386",null);_t.options.__file="OtherSettings.vue";var xt=_t.exports;k()(_t,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"],VSwitch:ot["a"]});var kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:""}},[t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:e.switchValue(t),"input-value":e.switchValue(t),label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r?1:0})}}}):e._e()],1)}),1)},St=[],Dt={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},paramText:function(e){return pe.getParamText(e)},switchValue:function(e){return e.value>0}}},Tt=Dt,At=Object(f["a"])(Tt,kt,St,!1,null,"09e7faf5",null);At.options.__file="LogSettings.vue";var Ot=At.exports;k()(At,{VFlex:we["a"],VLayout:A["a"],VSwitch:ot["a"]});var Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.discrete?r("app-select-action",{attrs:{param:t,"action-disabled":e.openCvLoading},on:{"select-change":function(t){return e.$emit("changed",t)},"action-click":function(t){e.$emit("load-opencv")}}}):e._e(),t.type==e.valueTypes.rangeSquareRoot?r("v-slider",{style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValueSqrt(t.value),hint:e.paramName(t.id)+": "+t.value+" px","persistent-hint":"",max:e.sliderValueSqrt(t.range.max),min:e.sliderValueSqrt(t.range.min),step:20},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r*r})}}}):e._e()],1)}),1)},Ct=[],Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",[r("app-select",{attrs:{param:e.param},on:{change:function(t){return e.$emit("select-change",t)}}}),r("v-btn",{attrs:{icon:"",disabled:e.actionDisabled,color:"primary lighten-1",small:""},on:{click:function(t){e.$emit("action-click")}}},[r("v-icon",[e._v("cached")])],1)],1)},jt=[],Ft={components:{AppSelect:Qe},props:{param:{type:Object,required:!0},actionDisabled:{type:Boolean,default:!1}}},Pt=Ft,Mt=Object(f["a"])(Pt,Rt,jt,!1,null,"67f3b442",null);Mt.options.__file="SelectAction.vue";var Nt=Mt.exports;k()(Mt,{VBtn:S["a"],VIcon:T["a"],VLayout:A["a"]});var $t={components:{AppSelectAction:Nt},props:{params:{type:Array,required:!0},openCvReady:{type:Boolean,required:!0},openCvLoading:{type:Boolean,required:!0}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},paramText:function(e){return pe.getParamText(e)},sliderValueSqrt:function(e){return Math.round(Math.sqrt(e))}}},Lt=$t,Et=Object(f["a"])(Lt,Vt,Ct,!1,null,"51bee110",null);Et.options.__file="MainSettings.vue";var Bt=Et.exports;k()(Et,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"]});var qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.rangeSquareRoot?r("v-slider",{style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValueSqrt(t.value),hint:e.paramName(t.id)+": "+t.value+" px","persistent-hint":"",max:e.sliderValueSqrt(t.range.max),min:e.sliderValueSqrt(t.range.min),step:20},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r*r})}}}):e._e()],1)}),1)},zt=[],Ut={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},sliderValueSqrt:function(e){return Math.round(Math.sqrt(e))}}},Gt=Ut,Wt=Object(f["a"])(Gt,qt,zt,!1,null,"0373c35b",null);Wt.options.__file="ImageInputSettings.vue";var Kt=Wt.exports;k()(Wt,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"]});var Yt={components:{AppViewLayout:ze,AppViewSpacer:Pe,AppViewTitle:Le,AppBasicSettings:rt,AppDetectorSettings:lt,AppMatchFilter:ft,AppOtherSettings:xt,AppLogSettings:Ot,AppMainSettings:Bt,AppImageInputSettings:Kt},data:function(){return{groupKeysDetectorSettings:["sift","surf","orb","brisk","kaze","akaze"],groupKeyOtherSettings:"other",groupKeyBasicSettings:"basic",groupKeyMatchFilter:"matchFilter",groupKeyLogSettings:"logging",groupKeyStitchSettings:"stitching",groupKeyMainSettings:"main",groupKeyImageInputSettings:"imageInput",activeTabIndexDetector:0}},created:function(){this.setInitialTabIndex()},computed:{settings:function(){return this.$store.getters["settings/settings"]}},methods:{params:function(e){return this.settings.paramsByGroupKey(e)},tabChanged:function(e){this.activeTabIndexDetector=e},setInitialTabIndex:function(){if(null===this.$store.getters["settings/activeTabIndexDetector"]){var e=this.$store.getters["settings/getCurrentDetTypeGroupKey"],t=this.groupKeysDetectorSettings.findIndex(function(t){return t==e});t>=0&&this.$store.dispatch("settings/activeTabIndexDetector",t)}},paramChanged:function(e){this.$store.dispatch("settings/param",e),e.id==me.alignSelectionOverlay.id&&this.$store.dispatch("worker/requestImage"),this.$store.dispatch("worker/multiStitchResetWorkerData")},logParamChanged:function(e){this.$store.dispatch("settings/param",e)},paramGroupName:function(e){return X[e].name}}},Ht=Yt,Xt=(r("62e0"),r("71a3")),Jt=r("c671"),Qt=r("fe57"),Zt=Object(f["a"])(Ht,ke,Se,!1,null,"448a9544",null);Zt.options.__file="Settings.vue";var er=Zt.exports;k()(Zt,{VTab:Xt["a"],VTabItem:Jt["a"],VTabs:Qt["a"]});var tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Multistitcher"}},[r("template",{slot:"rightElem"},[r("div",{style:{"padding-right":"0.2rem"}},[r("span",{style:{"white-space":"nowrap"}},[e._v("\n        detector: "),r("strong",[e._v(e._s(e.detTypeName)+" ")])])])]),r("template",{slot:"leftElem"},[r("div",{style:{"padding-right":"0.2rem","padding-left":"1rem",color:e.$vuetify.theme.primary,cursor:"pointer"},on:{click:e.switchSettingsDisplay}},[r("span",{style:{"white-space":"nowrap"}},[e.$store.getters["settings/multiStitcherSettingsOn"]?r("strong",[e._v("▲ Settings")]):r("strong",[e._v("▼ Settings")])])])]),r("div",[r("app-action-bar",{attrs:{compute:e.multiStitch,kill:function(){return e.$store.dispatch("worker/reload")},"compute-success":e.$store.getters["worker/results/success"](e.multiStitchName),"worker-ready":e.$store.getters["worker/ready"],"worker-busy-compute":e.$store.getters["worker/busyCompute"],"worker-busy-image":e.$store.getters["worker/busyImage"],"worker-action-info":e.$store.getters["worker/currentActionInfo"],"worker-action-info-error":e.$store.getters["logs/currentErrorMessage"],"input-busy-image":e.$store.getters["multiInput/busy"]||e.$store.getters["multiInput/busyLoading"],"fail-text":e.errorText,"action-text":"Stitch!","result-valid":e.$store.getters["worker/results/imageDataValid"](e.multiStitchName),multiple:!0,"delete-disabled":0==e.$store.getters["multiInput/imageCount"],"enable-save-image":!0,inputButtonsTitle:"Choose input"},on:{"delete-result":e.deleteResult,"delete-click":e.deleteAllOrSelectedInputImages,"save-result":e.saveImage,"multi-input-files-changed":e.multiInputFilesChanged,"load-default-images":e.loadDefaultImages}}),e.$store.getters["settings/multiStitcherSettingsOn"]?r("div",[r("v-tabs",{attrs:{value:e.$store.getters["settings/activeTabIndexMultiStitcher"]||0,height:"30px",color:"#eeeeee","slider-color":"secondary"},on:{change:function(t){return e.$store.dispatch("settings/activeTabIndexMultiStitcher",t)}}},[e._l(e.groupKeysMultiStitcherSettings,function(t,a){return r("v-tab",{key:a,attrs:{ripple:""}},[e._v("\n          "+e._s(e.paramGroupName(t))+"\n        ")])}),e._l(e.groupKeysMultiStitcherSettings,function(t,a){return r("v-tab-item",{key:a,attrs:{lazy:""}},["multiStitcherCamera"==t?r("app-multi-stitcher-camera-settings",{attrs:{params:e.params(t),showFieldOfView:!e.camEstimationOn,enableFieldOfView:e.selectedIndices.length>0,fieldOfView:e.fieldOfView,fieldOfViewDefaultValue:e.fieldOfViewDefaultValue},on:{change:e.paramChanged,fieldOfViewChange:e.setFieldOfView}}):e._e(),"multiStitcherSeams"==t?r("app-multi-stitcher-seams-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherImage"==t?r("app-multi-stitcher-image-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherConfidence"==t?r("app-multi-stitcher-confidence-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherMemory"==t?r("app-multi-stitcher-memory-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherStitchOrder"==t?r("app-multi-stitcher-stitch-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e()],1)})],2),r("app-view-spacer",{attrs:{mtop:"0px"}})],1):e._e(),e.resultValid?r("v-layout",{attrs:{"justify-center":""}},[r("app-image-result",{attrs:{"image-url":e.$store.getters["worker/results/imageDataUrl"](e.multiStitchName),"image-name":e.multiStitchName,canDrag:!1}})],1):e._e(),r("app-multi-input-images",{attrs:{imageUrlArray:e.$store.getters["multiInput/imageDataUrlsArray"],imageKeyArray:e.$store.getters["multiInput/imageDataKeyArray"],fieldOfViewArray:e.$store.getters["multiInput/imageFieldOfViewArray"],indicesSelected:e.$store.getters["multiInput/indicesSelected"]},on:{imageClicked:function(t){return e.$store.commit("multiInput/imageClicked",t)},swap:e.swapImagesInputImages}})],1)],2)},rr=[],ar=(r("96cf"),r("3b8d")),ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("v-layout",{attrs:{"text-xs-left":"",caption:"","justify-space-between":"","pr-2":"","align-center":""}},[r("span",{style:{position:"relative"}},[e._v("\n        "+e._s(e.inputButtonsTitle)+"\n\n         "),r("v-btn",{style:{position:"absolute",top:"0",right:"0",transform:"translateY(-42%) translateX(120%)"},attrs:{flat:"",icon:"",color:"accent"},on:{click:function(t){e.$emit("load-default-images")}}},[r("v-icon",{attrs:{small:""}},[e._v("cached")])],1)],1),e.workerReady?e.workerBusyCompute||e.workerBusyImage&&!e.showStatusInfo&&e.currentComputeTime&&e.workerActionInfoMessage?r("span",{style:{color:e.workerActionInfoError?e.$vuetify.theme.error:e.$vuetify.theme.primary}},[e._v("\n        "+e._s(e.timeStr(e.currentComputeTime)+", "+e.workerActionInfoMessage)+"\n      ")]):(e.inputBusyImage||e.resultValid)&&!e.showStatusInfo&&e.transitionDone&&e.workerActionInfoMessage?r("span",{style:{color:e.workerActionInfoError?e.$vuetify.theme.error:e.$vuetify.theme.primary}},[e._v("\n        "+e._s(e.workerActionInfoMessage)+" ...\n      ")]):e.resultValid&&!e.showStatusInfo&&e.transitionDone?r("span",[r("span",{style:{color:e.$vuetify.theme.error,cursor:"pointer"},on:{click:function(t){e.$emit("delete-result")}}},[r("strong",[e._v("▶ Clear image")])]),e.enableSaveImage?r("span",{style:{color:e.$vuetify.theme.primary,cursor:e.workerBusyImage?"wait":"pointer","padding-left":"1rem","padding-right":"0.2rem",opacity:e.workerBusyImage?"0.5":"1.0"},on:{click:function(t){e.workerBusyImage||e.$emit("save-result")}}},[r("strong",[e._v("▶ Save image")])]):e._e()]):e._e():r("span",{style:{color:e.$vuetify.theme.primary}},[e._v("\n        Loading OpenCV "+e._s(e.timeStr(e.currentLoadingTime))+"\n      ")]),r("transition",{attrs:{name:"status-info"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[e.showStatusInfo&&e.workerActionInfoError&&1===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v(e._s(e.workerActionInfoError)+", time "+e._s(e.timeStr(e.computeTimeTotal)))])]):e.showStatusInfo&&1===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.success}},[r("strong",[e._v("Success, time "+e._s(e.timeStr(e.computeTimeTotal)))])]):e.showStatusInfo&&2===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v("Low confidence result, time "+e._s(e.timeStr(e.computeTimeTotal)))])]):e.showStatusInfo&&0===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v(e._s(e.failText))])]):e.showStatusInfo&&e.workerErrorMessage?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v(e._s(e.workerErrorMessage))])]):e._e()])],1),r("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[r("v-flex",{attrs:{"d-flex":""}},[e.multiple?r("v-layout",[r("app-upload-button",{key:"multiStitch",style:{padding:"0 0.2rem 0 0"},attrs:{"unique-id":!0,title:"Images ...",disabled:e.workerBusy||e.inputBusyImage,accept:"image/*",multiple:e.multiple,small:"","file-changed-callback":function(t){return e.onMultiFileChanged(t)}},on:{"file-selection-started":function(t){e.$store.commit("multiInput/busyLoading",!0)},"file-selection-ended":function(t){e.$store.commit("multiInput/busyLoading",!1)}}}),r("v-btn",{style:{padding:"0 0.2rem 0 0",margin:"0","text-transform":"none !important"},attrs:{small:"",color:"primary",disabled:e.deleteDisabled},on:{click:function(t){e.$emit("delete-click")}}},[e._v("\n            Delete\n          ")])],1):r("v-layout",e._l(e.$store.getters["input/allImageNames"],function(t,a){return r("app-upload-button",{key:t,style:{padding:"0 0.2rem 0 0"},attrs:{"unique-id":!0,title:a+1+" ...",disabled:e.workerBusy||e.inputBusyImage,accept:"image/*",multiple:e.multiple,small:"","file-changed-callback":function(r){return e.onFileChanged(t,r)}},on:{"file-selection-started":function(r){e.$store.commit("input/busy",{name:t,value:!0})},"file-selection-ended":function(r){e.$store.commit("input/busy",{name:t,value:!1})}}})}),1)],1),r("v-flex",[r("v-layout",{attrs:{"justify-end":"","align-center":""}},[r("v-btn",{style:{"text-transform":"none !important",position:"relative"},attrs:{color:e.workerBusyCompute&&null!=e.kill?"error":"primary",disabled:e.computeButtonDisabled,small:""},on:{click:function(t){e.workerBusyCompute&&null!=e.kill?e.runKill():e.runCompute()}}},[e._v("\n            "+e._s(e.workerBusyCompute&&null!=e.kill?"Abort":e.actionText)+"\n          ")])],1)],1)],1),r("app-view-spacer",{attrs:{mtop:"0.5rem"}})],1)])},nr=[],sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-btn"},[r("input",{attrs:{id:e.id,type:"file",name:e.name,accept:e.accept,multiple:e.isMultiple},domProps:{value:e.value},on:{change:e.fileChanged,click:e.fileSelectionStarted,focus:e.inputFocus}}),r("label",{class:"v-btn "+e.classes+e.color+" upload-btn",style:{padding:"0",margin:"0","text-transform":"none !important"},attrs:{for:e.id}},[e._t("icon-left"),e._v("\n    "+e._s(e.icon?"":e.title)+"\n    "),e._t("icon")],2)])},or=[],ur=(r("f386"),r("4917"),q()()),cr=q()(),lr=function(){function e(t){if(Object(L["a"])(this,e),t!=cr)throw"Cannot construct Singleton!";this._deviceOS=e.deviceOS(),this._renderingEngine=e.renderingEngine()}return Object(E["a"])(e,[{key:"isGeckoOnAndroid",value:function(){return"android"==this._deviceOS&&"gecko"==this._renderingEngine}}],[{key:"deviceOS",value:function(){var e=navigator.userAgent;return e.match(/Android/i)?"android":e.match(/webOS/i)?"webos":e.match(/iPhone/i)?"iphone":e.match(/iPod/i)?"ipod":e.match(/iPad/i)?"ipad":e.match(/Windows Phone/i)?"windows phone":e.match(/SymbianOS/i)?"symbian":e.match(/RIM/i)||e.match(/BB/i)?"blackberry":""}},{key:"renderingEngine",value:function(){var e=navigator.userAgent;return e.match(/trident/i)?"trident":e.match(/webkit/i)?"webkit":e.match(/gecko/i)?"gecko":void 0}},{key:"instance",get:function(){return this[ur]||(this[ur]=new e(cr)),this[ur]}}]),e}(),mr={props:{accept:{default:"*",type:String},block:{default:!1,type:Boolean},depressed:{default:!1,type:Boolean},fileChangedCallback:{default:void 0,type:Function},color:{default:"primary",type:String},disabled:{default:!1,type:Boolean},flat:{default:!1,type:Boolean},hover:{default:!0,type:Boolean},icon:{default:!1,type:Boolean},large:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},name:{default:"uploadFile",type:String},outline:{default:!1,type:Boolean},ripple:{default:!0,type:Boolean},round:{default:!1,type:Boolean},small:{default:!1,type:Boolean},title:{default:"Upload",type:String},uniqueId:{default:!1,type:Boolean}},computed:{id:function(){return this.uniqueId?"".concat(this._uid,"uploadFile"):"uploadFile"},classes:function(){var e={"v-btn--block":this.block,"v-btn--flat":this.flat,"upload-btn-hover":this.hover,"v-btn--icon":this.icon,"v-btn--large":this.large,"v-btn--loading":this.loading,"v-btn--outline":this.outline,"v-btn--round":this.round,"v-btn--small":this.small,"v-btn--disabled":this.disabled,"v-btn--depressed":this.depressed},t="";for(var r in e)e[r]&&(t+="".concat(r," "));return t},isMultiple:function(){return this.multiple&&!lr.instance.isGeckoOnAndroid()}},data:function(){return{value:"",fileChangedCalled:!1,inputClicked:!1}},methods:{fileChanged:function(e){this.fileChangedCalled=!0,this.fileSelectionStarted(),e&&this.fileChangedCallback&&(e.target.files?this.multiple&&!this.isMultiple&&e.target.files[0]?this.fileChangedCallback([e.target.files[0]]):this.isMultiple?this.fileChangedCallback(e.target.files):!this.multiple&&e.target.files[0]?this.fileChangedCallback(e.target.files[0]):this.fileChangedCallback(null):this.fileChangedCallback(null),this.value=""),this.fileSelectionEnded()},fileSelectionStarted:function(){this.inputClicked=!0,lr.instance.isGeckoOnAndroid()||this.$emit("file-selection-started")},fileSelectionEnded:function(){lr.instance.isGeckoOnAndroid()||(this.$emit("file-selection-ended"),this.fileChangedCalled=!1)},inputFocus:function(){var e=this;lr.instance.isGeckoOnAndroid()||this.inputClicked&&(this.inputClicked=!1,setTimeout(function(){e.fileChangedCalled||e.fileSelectionEnded()},4e3))}},beforeDestroy:function(){lr.instance.isGeckoOnAndroid()||this.$emit("file-selection-ended")}},dr=mr,pr=(r("fcd5"),Object(f["a"])(dr,sr,or,!1,null,"64068d92",null));pr.options.__file="UploadButton.vue";var gr=pr.exports,hr={components:{AppUploadButton:gr,AppViewSpacer:Pe},props:{compute:{type:Function,required:!0},kill:{type:Function,default:null},computeSuccess:{validator:function(e){return-1!==[0,1,2,null].indexOf(e)},required:!0},workerReady:{type:Boolean,required:!0},workerBusyCompute:{type:Boolean,required:!0},workerBusyImage:{type:Boolean,required:!0},workerActionInfo:{type:String,default:""},workerActionInfoError:{type:String,required:!0},workerlastCompletedActionTime:{type:Number,default:0},inputBusyImage:{type:Boolean,required:!0},failText:{type:String,default:"No match found!"},actionText:{type:String,default:"Match!"},actionButtonDisabledCondition:{type:Boolean,default:!1},resultValid:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},deleteDisabled:{type:Boolean,default:!1},enableSaveImage:{type:Boolean,default:!1},inputButtonsTitle:{type:String,default:""}},created:function(){this.startIntervalCurrentLoadingTime()},data:function(){return{showStatusInfo:!1,transitionDone:!0,computeTimeTotal:0,killCalled:!1}},computed:{workerErrorMessage:function(){var e=this.$store.getters["worker/error"];return e?e.message||"Error!":null},workerActionInfoMessage:function(){var e=this.workerActionInfoError?this.workerActionInfoError:this.workerActionInfo;return!e&&this.inputBusyImage?"Loading image/s":e&&e.length>50?e.substring(0,50):e},workerBusy:function(){return this.workerBusyCompute||this.workerBusyImage},computeButtonDisabled:function(){return this.actionButtonDisabledCondition||this.showStatusInfo||!this.workerReady||!this.multiple&&!this.$store.getters["input/allImageDataValid"]||this.multiple&&this.$store.getters["multiInput/imageCount"]<=1||this.workerBusyCompute&&null==this.kill||this.multiple&&this.inputBusyImage},currentComputeTime:function(){return this.$store.getters["worker/currentComputeTime"]},currentLoadingTime:function(){return this.$store.getters["worker/currentLoadingTime"]}},methods:{onFileChanged:function(e,t){this.$store.dispatch("input/imageFile",{name:e,file:t})},onMultiFileChanged:function(e){this.$emit("multi-input-files-changed",e)},afterEnter:function(){this.showStatusInfo=!1,this.transitionDone=!1},afterLeave:function(){this.transitionDone=!0,this.setCurrentComputeTime(null)},runKill:function(){this.killCalled=!0,this.kill()},runCompute:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.killCalled=!1,this.showStatusInfo=!1,this.startIntervalCurrentComputeTime(),t=new Date,e.next=6,this.compute();case 6:this.computeTimeTotal=new Date-t,this.killCalled||(this.showStatusInfo=!0,setTimeout(function(){r.showStatusInfo=!1},1e4));case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),startIntervalCurrentComputeTime:function(){var e=this,t=new Date;if(this.setCurrentComputeTime(0),!this.showStatusInfo)var r=setInterval(function(){e.setCurrentComputeTime(new Date-t),(e.showStatusInfo||e.killCalled)&&(clearInterval(r),e.killCalled&&(e.killCalled=!1))},100)},startIntervalCurrentLoadingTime:function(){var e=this;if(!this.currentLoadingTime){var t=new Date;if(this.setCurrentLoadingTime(0),!this.workerReady)var r=setInterval(function(){e.setCurrentLoadingTime(new Date-t),e.workerReady&&(clearInterval(r),e.setCurrentLoadingTime(null))},150)}},timeStr:function(e){if(e<=0)return"";var t=Math.floor(e/6e4),r=e/1e3-60*t;return t>=1?"".concat(t," m ").concat(Math.floor(r)," s"):"".concat(r>10?r.toFixed(1):r.toFixed(2)," s")},setCurrentComputeTime:function(e){this.$store.commit("worker/currentComputeTime",e)},setCurrentLoadingTime:function(e){this.$store.commit("worker/currentLoadingTime",e)}}},fr=hr,yr=(r("5353"),Object(f["a"])(fr,ir,nr,!1,null,"81f6381a",null));yr.options.__file="ActionBar.vue";var vr=yr.exports;k()(yr,{VBtn:S["a"],VFlex:we["a"],VIcon:T["a"],VLayout:A["a"]});var br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"images-all"}},[e.imageUrlArray.length>0?r("div",{style:{width:"100%",border:"1px solid #00000055","background-color":"#f6f6f6",padding:"0.1rem 0.1rem","margin-top":"1rem"}},[r("transition-group",{style:{display:"grid","grid-template-columns":"repeat(auto-fill, "+e.gridCellWidth+"%)","grid-template-rows":"auto",margin:"0 auto",width:"100%"},attrs:{tag:"div",name:"images-list-items"}},e._l(e.imageUrlArray,function(t,a){return r("div",{key:e.imageKeyArray[a],style:{outline:e.$store.getters["multiInput/imageDataValid"](a)?e.borderLineWidth(a)+" solid "+e.borderColor(a):null,margin:"3px",display:"flex","align-items":"center","justify-content":"center"},on:{click:function(t){t.stopPropagation(),e.imageClicked(a)},drop:function(t){return t.preventDefault(),function(t){return e.dragDrop(t,a)}(t)},dragover:function(e){e.preventDefault()},dragend:function(e){e.preventDefault()},dragenter:function(e){e.preventDefault()}}},[r("div",{style:{padding:"0.3rem","background-color":"#ffffff"}},[r("div",{style:{position:"relative"}},[r("img",{ref:a+"",refInFor:!0,staticClass:"transparent-pattern",style:{display:"block","max-width":"100%","max-height":"100%",width:"auto",height:"auto"},attrs:{id:a+"",src:t},on:{dragstart:function(t){return e.dragStart(t,a)},dragover:function(e){e.preventDefault()},dragend:function(e){e.preventDefault()}}}),r("div",{style:{position:"absolute",bottom:"0px",right:"0px",color:e.$vuetify.theme.primary,transform:"translateY(0%) translateX(0%)","background-color":e.$vuetify.theme.accent,padding:"0.1rem 0.3rem",margin:"0 0.2rem 0.2rem 0"}},[r("strong",[e._v(e._s(a))])])])])])}),0)],1):e._e()])},wr=[],Ir={props:{imageUrlArray:{type:Array,required:!0},imageKeyArray:{type:Array,required:!0},fieldOfViewArray:{type:Array,required:!0},indicesSelected:{type:Array,required:!0}},computed:{gridCellWidth:function(){return"xs"==this.$vuetify.breakpoint.name?50:"sm"==this.$vuetify.breakpoint.name?33.3333333:25}},methods:{imageClicked:function(e){this.$emit("imageClicked",e)},borderColor:function(e){return this.indicesSelected.some(function(t){return t==e})?this.$vuetify.theme.error:this.$vuetify.theme.secondary},borderLineWidth:function(e){return this.indicesSelected.some(function(t){return t==e})?"2px":"1px"},dragStart:function(e,t){e.dataTransfer.setData("number/indexFrom",t)},dragDrop:function(e,t){var r=e.dataTransfer.getData("number/indexFrom");r&&(r=Number(r)),isNaN(r)||this.$emit("swap",{indexFrom:r,indexTo:t})}}},_r=Ir,xr=(r("7c24"),Object(f["a"])(_r,br,wr,!1,null,"0ad41ba8",null));xr.options.__file="MultiInputImages.vue";var kr=xr.exports,Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"mainDiv"},[r("div",{style:{border:"1px solid "+e.$vuetify.theme.secondary,padding:"0.3rem"}},[r("img",{ref:e.imageName,staticClass:"transparent-pattern",class:e.imgClasses,style:{display:"block","max-width":"100%","max-height":"50vh",width:"auto",height:"auto",margin:"auto",padding:"0"},attrs:{id:e.imageName,src:e.imageUrl,draggable:"true"},on:{click:function(t){return t.stopPropagation(),e.showUnscaledIf(t)},load:function(t){e.canShowDialog=e.isImageScaled()},dragstart:e.dragStart,dragover:function(e){e.preventDefault()},dragend:function(e){e.preventDefault()}}})]),r("v-dialog",{ref:e.dialog.name,attrs:{attach:e.$refs.mainDiv,persistent:"",stlye:{cursor:"move"},"content-class":"transparent-pattern"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showDialog=!1}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("img",{ref:e.dialog.imageName,staticClass:"transparent-pattern",attrs:{id:e.dialog.imageName,src:e.imageUrl,stlye:{cursor:"move",display:"block"}},on:{mousedown:function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startDrag(t)):null},touchstart:function(t){return t.stopPropagation(),e.startDrag(t)}}})])],1)},Dr=[],Tr={props:{imageName:{type:String,required:!0},imageUrl:{validator:function(){return!0},required:!0},projected:{type:Boolean,default:!1},fieldOfView:{type:Number,default:0},canDrag:{type:Boolean,default:!0}},computed:{imgClasses:function(){return{"cursor-drag-zoom":this.canShowDialog&&this.canDrag,"cursor-drag":!this.canShowDialog&&this.canDrag,"cursor-zoom-in":this.canShowDialog&&!this.canDrag}}},data:function(){return{showDialog:!1,canShowDialog:!1,htmlStyleOverflowY:null,clickPos:{x:null,y:null},dialog:{name:"dialog_000a",imageName:this.imageName+"D",startPos:{x:null,y:null},dims:{w:null,h:null},scrollInfo:{w:null,h:null,lMax:null,lStart:null,tMax:null,tStart:null},innerDialog:function(e){return e[this.name].$refs.dialog},hideScrollbars:function(e){"hidden"!=this.innerDialog(e).style.overflow&&(this.innerDialog(e).style.overflow="hidden")},setMoveCursor:function(e){this.innerDialog(e).style.cursor="move"},dragMode:function(){return null!=this.startPos.x},stop:function(){this.startPos.x=null},start:function(e,t,r){console.assert(this.innerDialog(r),"Inner dialog must not be null"),this.startPos.x=e,this.startPos.y=t,this.dims.w=this.innerDialog(r).clientWidth,this.dims.h=this.innerDialog(r).clientHeight,this.scrollInfo.w=r[this.imageName].scrollWidth,this.scrollInfo.h=r[this.imageName].scrollHeight,this.scrollInfo.lMax=this.scrollInfo.w-this.dims.w,this.scrollInfo.tMax=this.scrollInfo.h-this.dims.h,this.scrollInfo.lStart=this.innerDialog(r).scrollLeft,this.scrollInfo.tStart=this.innerDialog(r).scrollTop,this.moved=!1},move:function(e,t,r){if(this.dragMode()){(Math.abs(this.startPos.x-e)>2||Math.abs(this.startPos.y-t)>2)&&(this.moved=!0);var a=this.scrollInfo.lStart+this.startPos.x-e;a<this.scrollInfo.lMax&&(this.innerDialog(r).scrollLeft=a);var i=this.scrollInfo.tStart+this.startPos.y-t;i<this.scrollInfo.tMax&&(this.innerDialog(r).scrollTop=i)}},init:function(e,t,r){var a=this.innerDialog(r).clientWidth,i=this.innerDialog(r).clientHeight,n=r[this.imageName].scrollWidth,s=r[this.imageName].scrollHeight,o=n-a,u=s-i,c=e-a/2,l=t-i/2;this.innerDialog(r).scrollLeft=c<o?c:o,this.innerDialog(r).scrollTop=l<u?l:u}}}},methods:{showUnscaledIf:function(e){if(this.canShowDialog){this.showDialog=!0;var t=this.scaleFactor();t>1&&(this.clickPos.x=t*(e.layerX-e.target.offsetLeft),this.clickPos.y=t*(e.layerY-e.target.offsetTop))}},isImageScaled:function(){return this.$refs&&this.$refs[this.imageName]&&(this.$refs[this.imageName].naturalWidth>this.$refs[this.imageName].width||this.$refs[this.imageName].naturalHeight>this.$refs[this.imageName].height)},scaleFactor:function(){return this.isImageScaled()?this.$refs[this.imageName].naturalWidth/this.$refs[this.imageName].width:1},startDrag:function(e){var t;e.preventDefault(),(t=this.dialog).start.apply(t,Object(m["a"])(this.coords(e)).concat([this.$refs])),this.addListeners()},endDrag:function(){this.removeAllDialogListeners(),this.dialog.dragMode()&&!this.dialog.moved&&(this.showDialog=!1),this.dialog.stop()},addListeners:function(){var e=this;window&&(this.mousemoveListener||(this.mousemoveListener=window.addEventListener("mousemove",function(t){var r;return(r=e.dialog).move.apply(r,Object(m["a"])(e.coords(t)).concat([e.$refs]))})),this.touchmoveListener||(this.touchmoveListener=window.addEventListener("touchmove",function(t){var r;return(r=e.dialog).move.apply(r,Object(m["a"])(e.coords(t)).concat([e.$refs]))})),this.mouseupListener||(this.mouseupListener=window.addEventListener("mouseup",this.endDrag)),this.touchendListener||(this.touchendListener=window.addEventListener("touchend",this.endDrag)))},removeAllDialogListeners:function(){window&&(this.mousemoveListener&&(window.removeEventListener(this.mousemoveListener),this.mousemoveListener=null),this.mouseupListener&&(window.removeEventListener(this.mouseupListener),this.mouseupListener=null),this.touchmoveListener&&(window.removeEventListener(this.touchmoveListener),this.mousemoveListener=null),this.touchendListener&&(window.removeEventListener(this.touchendListener),this.touchendListener=null))},coords:function(e){return e.touches&&e.touches.length>0?[e.touches[0].clientX,e.touches[0].clientY]:[e.clientX,e.clientY]},dragStart:function(e){e.dataTransfer.setData("text/plain",this.imageUrl),e.dataTransfer.setData("number/projected",this.projected?1:0),e.dataTransfer.setData("number/fieldOfView",this.fieldOfView)}},mounted:function(){var e=this;window&&!this.resizeListener&&(this.resizeListener=window.addEventListener("resize",function(){e.canShowDialog=e.isImageScaled(),!e.canShowDialog&&e.showDialog&&(e.showDialog=!1)}))},beforeUpdate:function(){this.showDialog?(this.htmlStyleOverflowY=document.documentElement.style.overflowY,document.documentElement.style.overflowY="auto"):(document.documentElement.style.overflowY=this.htmlStyleOverflowY,document.documentElement.classList.contains("overflow-y-hidden")&&document.documentElement.classList.remove("overflow-y-hidden"))},updated:function(){this.showDialog&&(this.dialog.hideScrollbars(this.$refs),this.dialog.setMoveCursor(this.$refs),null!=this.clickPos.x&&null!=this.clickPos.y&&(this.dialog.init(this.clickPos.x,this.clickPos.y,this.$refs),this.clickPos.x=null,this.clickPos.y=null))},beforeDestroy:function(){this.removeAllDialogListeners(),window&&this.resizeListener&&(window.removeEventListener(this.resizeListener),this.resizeListener=null)}},Ar=Tr,Or=(r("08f9"),r("169a")),Vr=Object(f["a"])(Ar,Sr,Dr,!1,null,"5eed89ac",null);Vr.options.__file="ImageResult.vue";var Cr=Vr.exports;k()(Vr,{VDialog:Or["a"]});var Rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},[e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.discrete?r("app-select",{attrs:{param:t},on:{change:e.changedDiscrete}}):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,max:t.range.max,min:t.range.min,step:.01,disabled:e.isDisabled(t)},on:{change:function(r){return e.$emit("change",{id:t.id,value:r})}}},"v-slider",e.additionalSliderAttributes(t),!1)):e._e()],1)}),e.showFieldOfView?r("v-flex",{attrs:{xs6:"",sm6:"","pa-2":""}},[r("v-text-field",{attrs:{name:"fieldOfView",label:"Field of view",hint:"Select input images","persistent-hint":"",placeholder:e.fieldOfViewDefaultValue,value:e.showFieldOfView&&e.enableFieldOfView?e.fieldOfView:"",type:"number",disabled:!e.enableFieldOfView},on:{change:function(t){return e.fieldOfViewChanged(t)}}})],1):e._e()],2)},jr=[],Fr={components:{AppSelect:Qe},props:{params:{type:Array,required:!0},showFieldOfView:{type:Boolean,default:!1},enableFieldOfView:{type:Boolean,default:!1},fieldOfView:{type:String,default:null},fieldOfViewDefaultValue:{type:String,default:"45"}},data:function(){return{}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},changedDiscrete:function(e){this.$emit("change",e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},fieldOfViewChanged:function(e){this.$emit("fieldOfViewChange",e)},isDisabled:function(e){var t=pe.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=l()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},additionalSliderAttributes:function(e){return"xs"==this.$vuetify.breakpoint.name?{hint:"".concat(this.paramName(e.id)," ").concat(e.value),"persistent-hint":!0,label:"","hide-details":!1}:{label:"".concat(this.paramName(e.id)," ").concat(e.value),"persistent-hint":!1,hint:null,"hide-details":!0}}}},Pr=Fr,Mr=(r("6303"),Object(f["a"])(Pr,Rr,jr,!1,null,"57531e52",null));Mr.options.__file="MultiStitcherCameraSettings.vue";var Nr=Mr.exports;k()(Mr,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"],VSwitch:ot["a"],VTextField:ut["a"]});var $r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},Lr=[],Er={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},isDisabled:function(e){var t=pe.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=l()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1}}},Br=Er,qr=(r("f1ae"),Object(f["a"])(Br,$r,Lr,!1,null,"7dacd4cd",null));qr.options.__file="MultiStitcherImageSettings.vue";var zr=qr.exports;k()(qr,{VFlex:we["a"],VLayout:A["a"],VSwitch:ot["a"]});var Ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},Gr=[],Wr={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},isDisabled:function(e){var t=pe.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=l()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1}}},Kr=Wr,Yr=(r("d01a"),Object(f["a"])(Kr,Ur,Gr,!1,null,"614804c8",null));Yr.options.__file="MultiStitcherStitchSettings.vue";var Hr=Yr.exports;k()(Yr,{VFlex:we["a"],VLayout:A["a"],VSwitch:ot["a"]});var Xr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,max:t.range.max,min:t.range.min,step:1,disabled:e.isDisabled(t)},on:{change:function(r){return e.$emit("change",{id:t.id,value:r})}}},"v-slider",e.additionalSliderAttributes(t),!1)):e._e(),t.type==e.valueTypes.discrete?r("app-select",{attrs:{param:t},on:{change:e.changedDiscrete}}):e._e()],1)}),1)},Jr=[],Qr={components:{AppSelect:Qe},props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},changedDiscrete:function(e){this.$emit("change",e)},isDisabled:function(e){var t=pe.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=l()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},additionalSliderAttributes:function(e){return"xs"==this.$vuetify.breakpoint.name?{hint:"".concat(this.paramName(e.id),": ").concat(e.value),"persistent-hint":!0,label:"","hide-details":!1}:{label:"".concat(this.paramName(e.id),": ").concat(e.value),"persistent-hint":!1,hint:null,"hide-details":!0}}}},Zr=Qr,ea=(r("ac87"),Object(f["a"])(Zr,Xr,Jr,!1,null,"574dd5ac",null));ea.options.__file="MultiStitcherSeamsSettings.vue";var ta=ea.exports;k()(ea,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"],VSwitch:ot["a"]});var ra=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.rangeSquareRoot?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValueSqrt(t.value),max:e.sliderValueSqrt(t.range.max),min:e.sliderValueSqrt(t.range.min),step:20},on:{change:function(r){return e.$emit("change",{id:t.id,value:r*r})}}},"v-slider",e.additionalSliderAttributes(t,"px"),!1)):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,max:t.range.max,min:t.range.min,step:1},on:{change:function(r){return e.$emit("change",{id:t.id,value:r})}}},"v-slider",e.additionalSliderAttributes(t,""),!1)):e._e()],1)}),1)},aa=[],ia={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},additionalSliderAttributes:function(e,t){return{hint:"".concat(this.paramName(e.id),": ").concat(e.value).concat(t?" "+t:""),"persistent-hint":!0,label:"","hide-details":!1}},sliderValueSqrt:function(e){return Math.round(Math.sqrt(e))}}},na=ia,sa=(r("9c9a"),Object(f["a"])(na,ra,aa,!1,null,"3aecced2",null));sa.options.__file="MultiStitcherMemorySettings.vue";var oa=sa.exports;k()(sa,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"],VSwitch:ot["a"]});var ua=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValue(t),max:t.range.max,min:t.range.min,step:t.step?t.step:"0.01",disabled:e.isDisabled(t)},on:{change:function(r){return e.sliderChanged(t,r)}}},"v-slider",e.additionalSliderAttributes(t),!1)):e._e()],1)}),1)},ca=[],la={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return ge}},methods:{paramName:function(e){return pe.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},isDisabled:function(e){var t=pe.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=l()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},additionalSliderAttributes:function(e){var t=e.value===e.range.maxReplace?"> ".concat(e.range.max):e.value;return"xs"==this.$vuetify.breakpoint.name?{hint:"".concat(this.paramName(e.id),": ").concat(t),"persistent-hint":!0,label:"","hide-details":!1}:{label:"".concat(this.paramName(e.id),": ").concat(t),"persistent-hint":!1,hint:null,"hide-details":!0}},sliderValue:function(e){return void 0!=e.range.maxReplace&&e.value==e.range.maxReplace?e.range.max:e.value},sliderChanged:function(e,t){var r=t;void 0!=e.range.maxReplace&&t==e.range.max&&(r=e.range.maxReplace),this.$emit("change",{id:e.id,value:r})}}},ma=la,da=(r("1106"),Object(f["a"])(ma,ua,ca,!1,null,"9fbe5e80",null));da.options.__file="MultiStitcherConfidenceSettings.vue";var pa=da.exports;k()(da,{VFlex:we["a"],VLayout:A["a"],VSlider:It["a"],VSwitch:ot["a"]});var ga="fixed",ha="moving",fa="result",ya="compare",va="stitch",ba="multiStitch",wa={components:{AppViewLayout:ze,AppViewSpacer:Pe,AppActionBar:vr,AppImageResult:Cr,AppMultiInputImages:kr,AppMultiStitcherImageSettings:zr,AppMultiStitcherCameraSettings:Nr,AppMultiStitcherStitchSettings:Hr,AppMultiStitcherSeamsSettings:ta,AppMultiStitcherMemorySettings:oa,AppMultiStitcherConfidenceSettings:pa},created:function(){this.$store.dispatch("multiInput/init"),this.$store.dispatch("worker/load")},computed:{multiStitchName:function(){return ba},selectedIndices:function(){return this.$store.getters["multiInput/indicesSelected"]},fieldOfView:function(){return this.selectedIndices.length>0?this.$store.getters["multiInput/imageFieldOfView"](this.selectedIndices[0])+"":""},fieldOfViewDefaultValue:function(){return this.selectedIndices.length>0?this.$store.getters["multiInput/imageFieldOfViewInitial"](this.selectedIndices[0])+"":""},resultValid:function(){return this.$store.getters["worker/results/imageDataValid"](ba)},errorText:function(){var e=this.$store.getters["worker/error"];return e&&e.message?e.message:"No match found!"},detTypeName:function(){return pe.getParamName(this.$store.getters["settings/param"](me.detType.id))},camEstimationOn:function(){return this.$store.getters["settings/param"](me.multiStitch_camEstimate.id)}},data:function(){return{settingsOn:!1,groupKeysMultiStitcherSettings:["multiStitcherCamera","multiStitcherSeams","multiStitcherImage","multiStitcherConfidence","multiStitcherMemory","multiStitcherStitchOrder"]}},methods:{multiStitch:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("multiInput/reloadFilesFromDiscIf");case 2:return e.next=4,this.$store.dispatch("worker/computeMultiStitchImageInSteps",{images:this.$store.getters["multiInput/imageDataArray"],fieldsOfView:this.$store.getters["multiInput/imageFieldOfViewArray"],settings:this.$store.getters["settings/settings"]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteWorkerData:function(){this.$store.dispatch("worker/multiStitchResetWorkerData")},deleteResult:function(){this.$store.commit("worker/results/imageData",{name:ba,imageData:null})},loadDefaultImages:function(){this.$store.dispatch("multiInput/loadDefaultImages"),this.deleteWorkerData()},deleteAllOrSelectedInputImages:function(){this.$store.dispatch("multiInput/removeAllOrSelected"),this.deleteWorkerData()},swapImagesInputImages:function(e){var t=e.indexFrom,r=e.indexTo;this.$store.commit("multiInput/swap",{indexFrom:t,indexTo:r}),this.deleteWorkerData()},saveImage:function(){this.$store.dispatch("worker/saveResultImage",{name:ba,imageFileName:"MultiStitcherImage.png"})},multiInputFilesChanged:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.deleteWorkerData(),e.next=3,this.$store.dispatch("multiInput/imageFiles",t);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),params:function(e){return this.$store.getters["settings/settings"].paramsByGroupKey(e)},paramGroupName:function(e){return X[e].name},switchSettingsDisplay:function(){this.$store.getters["settings/multiStitcherSettingsOn"]?this.$store.dispatch("settings/multiStitcherSettingsOn",!1):this.$store.dispatch("settings/multiStitcherSettingsOn",!0)},paramChanged:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("settings/param",t);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setFieldOfView:function(e){var t=this;this.selectedIndices.forEach(function(r){e?t.$store.commit("multiInput/imageFieldOfViewUpdate",{index:r,fieldOfView:+e}):t.$store.commit("multiInput/imageFieldOfViewUpdate",{index:r,fieldOfView:t.$store.getters["multiInput/imageFieldOfViewInitial"](r)})})}}},Ia=wa,_a=Object(f["a"])(Ia,tr,rr,!1,null,null,null);_a.options.__file="MultiStitcher.vue";var xa=_a.exports;k()(_a,{VLayout:A["a"],VTab:Xt["a"],VTabItem:Jt["a"],VTabs:Qt["a"]});var ka=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Latest log messages"}},[e._l(e.$store.getters["logs/errorMessages"].slice().reverse(),function(t,a){return r("div",{key:a,style:{margin:"0",padding:"0","font-size":"0.7em","text-align":"left",color:e.$vuetify.theme.error},attrs:{"v-text":t}},[e._v("\n    "+e._s(t)+"\n  ")])}),e.$store.getters["logs/errorMessages"].length>0?r("app-view-spacer"):e._e(),e._l(e.$store.getters["logs/messages"].slice().reverse(),function(t,a){return r("div",{key:a+"error",style:{margin:"0",padding:"0","font-size":"0.7em","text-align":"left",color:a%2==0?e.$vuetify.theme.secondary:e.$vuetify.theme.primary},attrs:{"v-text":t}},[e._v("\n    "+e._s(t)+"\n  ")])})],2)},Sa=[],Da={components:{AppViewSpacer:Pe,AppViewLayout:ze}},Ta=Da,Aa=Object(f["a"])(Ta,ka,Sa,!1,null,"c5c2c2ba",null);Aa.options.__file="LogOutput.vue";var Oa=Aa.exports;a["a"].use(xe["a"]);var Va,Ca,Ra,ja,Fa,Pa,Ma,Na=new xe["a"]({mode:"history",base:"/imgalign/",routes:[{path:"/index.html",redirect:{name:"multistitcher"}},{path:"/settings",name:"settings",component:er},{path:"/",name:"multistitcher",component:xa},{path:"/logoutput",name:"logoutput",component:Oa}]}),$a=r("2f62"),La=r("bd86"),Ea=r("795b"),Ba=r.n(Ea),qa=function(){function e(){Object(L["a"])(this,e)}return Object(E["a"])(e,null,[{key:"imageDataFromImageSrc",value:function(e){var t=new Date,r=document.createElement("canvas");r.width=e.width,r.height=e.height;var a=r.getContext("2d");a.drawImage(e,0,0,e.width,e.height);var i=a.getImageData(0,0,r.width,r.height);return console.log("[imageDataFromImageSrc][time][ms]",new Date-t),i}},{key:"imageSrcFromImageData",value:function(e){var t=new Date,r=document.createElement("canvas"),a=r.getContext("2d");r.width=e.width,r.height=e.height,a.putImageData(e,0,0);var i=r.toDataURL();return console.log("[imageSrcFromImageData][toDataURL][time][ms]",new Date-t),i}},{key:"imageBlobFromImageData",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new Date,a=document.createElement("canvas"),i=a.getContext("2d"),a.width=t.width,a.height=t.height,i.putImageData(t,0,0),e.next=8,new Ba.a(function(e){try{a.toBlob(function(t){return e(t)},"image/png",1)}catch(t){console.log("[imageBlobFromImageData][toBlob][Error]",t),e(null)}});case 8:return n=e.sent,console.log("[imageBlobFromImageData][toBlob][time][ms]",new Date-r),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),za=15,Ua=(H()({pathColor:"#ff9999ff",pathColor1:"#000000ff",pathColor2:"#ffffffff",pathWidth:2,pathWidth1:4,pathWidth2:2,ptColor:"#5555ffff",ptColor1:"#000000ff",ptColor2:"#ffffffff",ptStartColor:"#ff5555ff",ptStartColor1:"#ffffffff",ptStartColor2:"#000000ff",fillColor:"#0000ff44",ptRadius:3,ptRadius1:4,ptRadius2:2}),r("6f45")),Ga=function(){function e(){Object(L["a"])(this,e)}return Object(E["a"])(e,null,[{key:"getFieldOfViewAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ba.a(function(e){Ua["getData"](t,function(){var t=this,r=Ua["getTag"](this,"FocalLengthIn35mmFilm");if(r){var a=Number(r);if(!isNaN(a)){var i=function(){var e=Ua["getTag"](t,"ImageWidth"),r=Ua["getTag"](t,"ImageHeight"),a=Ua["getTag"](t,"PixelXDimension"),i=Ua["getTag"](t,"PixelYDimension");if(a&&(e=a),i&&(r=i),!e||!r)return null;var n=Number(e);if(isNaN(n))return null;var s=Number(r);return isNaN(s)?null:e/r};if(a){var n=6300/(Math.PI*a),s=i();return s&&s<1&&(n*=s),void e(Math.round(n))}}}e(null)})}));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Wa=r("5c22"),Ka=r.n(Wa),Ya=r("5fba"),Ha=r.n(Ya),Xa=r("60f8"),Ja=r.n(Xa),Qa=r("8bd2"),Za=r.n(Qa),ei=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(L["a"])(this,e),this._pts=t}return Object(E["a"])(e,[{key:"addPt",value:function(e){this._pts.push(e)}},{key:"addPtAndCloseIf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.pts.length<3)this.addPt(e);else{var r=this.pts[0],a=r.x,i=r.y;Math.pow(Math.abs(a-e.x),2)+Math.pow(Math.abs(i-e.y),2)<Math.pow(t,2)?this.addPt({x:a,y:i}):this.addPt(e)}}},{key:"isClosed",value:function(){return this.pts.length>3&&this.pts[0].x==this.pts[this.pts.length-1].x&&this.pts[0].y==this.pts[this.pts.length-1].y}},{key:"clear",value:function(){this._pts=[]}},{key:"scaledCopy",value:function(t){var r=new e,a=!0,i=!1,n=void 0;try{for(var s,o=l()(this.pts);!(a=(s=o.next()).done);a=!0){var u=s.value;r.addPt({x:u.x*t,y:u.y*t})}}catch(c){i=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}return r}},{key:"pts",get:function(){return this._pts}},{key:"bbox",get:function(){for(var e={x:Za.a,y:Za.a},t={x:Ja.a,y:Ja.a},r=0;r<this.pts.length;++r){var a=this.pts[r];a.x<e.x&&(e.x=a.x),a.x>t.x&&(t.x=a.x),a.y<e.y&&(e.y=a.y),a.y>t.y&&(t.y=a.y)}return{tl:e,br:t}}}]),e}();function ti(e,t,r){e.commit("imageFieldOfView",{name:t,fieldOfView:r}),t==ga?e.dispatch("settings/param",{id:me.stitch_fieldOfView1.id,value:r},{root:!0}):t==ha&&e.dispatch("settings/param",{id:me.stitch_fieldOfView2.id,value:r},{root:!0})}function ri(e,t,r){e.commit("imageProjected",{name:t,projected:r}),r&&(t==ga?e.dispatch("settings/param",{id:me.stitch_projection.id,value:me.stitch_projectionTypeNone.id},{root:!0}):t==ha&&e.dispatch("settings/param",{id:me.stitch_projection2.id,value:me.stitch_projectionTypeNone.id},{root:!0}))}var ai={imageData:(Va={},Object(La["a"])(Va,ga,null),Object(La["a"])(Va,ha,null),Va),imageDataUrls:(Ca={},Object(La["a"])(Ca,ga,null),Object(La["a"])(Ca,ha,null),Ca),imageFieldOfView:(Ra={},Object(La["a"])(Ra,ga,null),Object(La["a"])(Ra,ha,null),Ra),imageProjected:(ja={},Object(La["a"])(ja,ga,!1),Object(La["a"])(ja,ha,!1),ja),polygons:(Fa={},Object(La["a"])(Fa,ga,new ei),Object(La["a"])(Fa,ha,new ei),Fa),floodFillTolerances:(Pa={},Object(La["a"])(Pa,ga,[]),Object(La["a"])(Pa,ha,[]),Pa),busy:(Ma={},Object(La["a"])(Ma,ga,!1),Object(La["a"])(Ma,ha,!1),Ma)},ii={imageData:function(e){return function(t){return e.imageData[t]}},imageDataUrl:function(e,t){return function(r){return t["imageDataValid"](r)?e.imageDataUrls[r]:null}},imageDataValid:function(e){return function(t){return e.imageData[t]&&e.imageData[t].width>0&&e.imageData[t].height>0}},allImageDataValid:function(e,t){return t["imageDataValid"](ga)&&t["imageDataValid"](ha)},allImageNames:function(){return[ga,ha]},imageFieldOfView:function(e){return function(t){return e.imageFieldOfView[t]}},imageProjected:function(e){return function(t){return e.imageProjected[t]}},polygons:function(e){return e.polygons},polygon:function(e){return function(t){return e.polygons[t]}},polygonClosedPts:function(e){return function(t){var r=e.polygons[t];return r.isClosed()?r.pts:[]}},polygonClosedPtsFixedImage:function(e){return e.polygons[ga].isClosed()?e.polygons[ga].pts:[]},polygonClosedPtsMovingImage:function(e){return e.polygons[ha].isClosed()?e.polygons[ha].pts:[]},pt:function(e){return function(t){var r=e.polygons[t].pts.length;return 0==r||e.polygons[t].isClosed()?null:e.polygons[t].pts[r-1]}},ptFixedImage:function(e){var t=e.polygons[ga].pts.length;return 0==t||e.polygons[ga].isClosed()?null:e.polygons[ga].pts[t-1]},ptMovingImage:function(e){var t=e.polygons[ha].pts.length;return 0==t||e.polygons[ha].isClosed()?null:e.polygons[ha].pts[t-1]},pathPts:function(e){return function(t){return 0==e.polygons[t].pts.length?[]:e.polygons[t].isClosed()?e.polygons[t].pts.slice(1):e.polygons[t].pts}},pathPtsFixedImage:function(e){var t=e.polygons[ga];return 0==t.pts.length?[]:t.isClosed()?t.pts.slice(1):t.pts},pathPtsMovingImage:function(e){var t=e.polygons[ha];return 0==t.pts.length?[]:t.isClosed()?t.pts.slice(1):t.pts},floodFillTolerances:function(e){return function(t){return 0==e.floodFillTolerances[t].length?[]:e.polygons[t].isClosed()?e.floodFillTolerances[t].slice(1):e.floodFillTolerances[t]}},busy:function(e){return function(t){return e.busy[t]}},busyFixedImage:function(e){return e.busy[ga]},busyMovingImage:function(e){return e.busy[ha]},busyAny:function(e){return e.busy[ga]||e.busy[ha]}},ni={imageData:function(e,t){var r=t.name,a=t.imageData;e.imageData[r]=a},_imageDataUrl:function(e,t){var r=t.name,a=t.imageDataUrl;e.imageDataUrls[r]=a},imageFieldOfView:function(e,t){var r=t.name,a=t.fieldOfView;e.imageFieldOfView[r]=a},imageProjected:function(e,t){var r=t.name,a=t.projected;e.imageProjected[r]=a},addPolygonPt:function(e,t){var r=t.name,a=t.pt,i=t.floodFillTolerance;e.polygons[r].isClosed()?(e.polygons[r]=new ei,e.floodFillTolerances[r]=[]):(e.polygons[r].addPtAndCloseIf(a,za),e.floodFillTolerances[r].push(i||0===i?i:10))},resetPolygon:function(e,t){e.polygons[t]=new ei,e.floodFillTolerances[t]=[]},busy:function(e,t){var r=t.name,a=t.value;e.busy[r]=a}},si={loadDefaultImages:function(e,t){for(var r=[{name:ga,dataUrl:t?t.url1:Ka.a},{name:ha,dataUrl:t?t.url2:Ha.a}],a=function(){var t=r[i],a=t.name,n=t.dataUrl,s=new Image;s.onload=function(){try{var t=qa.imageDataFromImageSrc(s);e.dispatch("imageData",{name:a,imageData:t,doResizeIf:!1}),s.onload=null}finally{e.commit("busy",{name:a,value:!1})}},n&&(s.src=n,e.commit("busy",{name:a,value:!0}))},i=0;i<r.length;i++)a()},init:function(e,t){e.getters["imageDataValid"](ga)||e.getters["imageDataValid"](ha)||e.dispatch("loadDefaultImages",t)},imageData:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,m,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,i=t.dispatch,n=t.rootGetters,s=r.name,o=r.imageData,u=r.doResizeIf,c=void 0===u||u,!(c&&o&&n["worker/ready"])){e.next=12;break}if(l=n["settings/param"](me.imageCapInput.id),!(o.width*o.height>l)){e.next=12;break}if(m=Math.sqrt(l/(o.width*o.height)),d=Math.floor(o.height*m),p=Math.floor(o.width*m),!n["worker/ready"]){e.next=11;break}return e.next=11,i("worker/setInputImageResized",{imageName:s,imageDataSrc:o,width:p,height:d},{root:!0});case 11:return e.abrupt("return");case 12:a("imageData",{name:s,imageData:o}),i("_imageDataUrl",{name:s,imageData:o}),a("resetPolygon",s),a("imageFieldOfView",{name:s,fieldOfView:null}),a("imageProjected",{name:s,projected:!1}),n["worker/ready"]&&(i("worker/resetWorkerData",null,{root:!0}),a("worker/results/imageData",{name:fa,imageData:null},{root:!0}),a("worker/results/imageData",{name:ya,imageData:null},{root:!0}),a("worker/results/imageData",{name:va,imageData:null},{root:!0}));case 18:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),_imageDataUrl:function(e,t){var r=e.commit,a=t.name,i=t.imageData;r("_imageDataUrl",i?{name:a,imageDataUrl:qa.imageSrcFromImageData(i)}:{name:a,imageDataUrl:null})},imageFile:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.name,i=r.file,n=new Image,n.onload=Object(ar["a"])(regeneratorRuntime.mark(function e(){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=qa.imageDataFromImageSrc(n),e.next=4,t.dispatch("imageData",{name:a,imageData:r});case 4:return e.next=6,Ga.getFieldOfViewAsync(n);case 6:i=e.sent,i&&ti(t,a,i),n.onload=null;case 9:return e.prev=9,t.commit("busy",{name:a,value:!1}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,,9,12]])})),i&&(t.commit("busy",{name:a,value:!0}),n.src=URL.createObjectURL(i));case 4:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageUrlBase64:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.name,i=r.url,n=r.fieldOfView,s=r.projected,o=new Image,o.onload=Object(ar["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=qa.imageDataFromImageSrc(o),e.next=4,t.dispatch("imageData",{name:a,imageData:r});case 4:if(n){e.next=8;break}return e.next=7,Ga.getFieldOfViewAsync(o);case 7:n=e.sent;case 8:n&&ti(t,a,n),s&&ri(t,a,s),o.onload=null;case 11:return e.prev=11,t.commit("busy",{name:a,value:!1}),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,,11,14]])})),i&&(t.commit("busy",{name:a,value:!0}),o.src=i);case 4:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},oi={namespaced:!0,state:ai,getters:ii,mutations:ni,actions:si},ui=(r("6c7b"),r("3eaf")),ci=r.n(ui),li=r("f627"),mi=r.n(li),di=r("dce7"),pi=r.n(di),gi={imageDataArray:[],imageDataKeysArray:[],imageDataUrlsArray:[],imageFileArray:[],imageFieldOfViewArray:[],imageFieldOfViewInitialArray:[],busy:!1,busyLoading:!1,indicesSelected:[],initCalled:!1},hi={imageDataArray:function(e){return e.imageDataArray},imageDataKeyArray:function(e){return e.imageDataKeysArray},imageDataUrlsArray:function(e){return e.imageDataUrlsArray},imageFileArray:function(e){return e.imageFileArray},imageFieldOfViewArray:function(e){return e.imageFieldOfViewArray},busy:function(e){return e.busy},busyLoading:function(e){return e.busyLoading},indicesSelected:function(e){return e.indicesSelected},imageFieldOfView:function(e){return function(t){return e.imageFieldOfViewArray[t]}},imageFieldOfViewInitial:function(e){return function(t){return e.imageFieldOfViewInitialArray[t]}},imageDataValid:function(e){return function(t){return e.imageDataArray.length>t&&e.imageDataArray[t]&&e.imageDataArray[t].width>0&&e.imageDataArray[t].height>0||e.imageFileArray.length>t&&e.imageFileArray[t]}},imageCount:function(e){return e.imageDataArray.length},initCalled:function(e){return e.initCalled}},fi={imageDataArray:function(e,t){e.imageDataArray=t},imageData:function(e,t){e.imageDataArray.push(t),e.imageDataKeysArray.push(Math.random())},_imageDataUrl:function(e,t){e.imageDataUrlsArray.push(t)},_imageFile:function(e,t){e.imageFileArray.push(t)},imageFieldOfView:function(e,t){e.imageFieldOfViewArray.push(t)},imageFieldOfViewInitial:function(e,t){e.imageFieldOfViewInitialArray.push(t)},imageDataUrlsArray:function(e,t){e.imageDataUrlsArray=t},imageFieldOfViewUpdate:function(e,t){var r=t.index,a=t.fieldOfView;e.imageFieldOfViewArray.splice(r,1,a)},imageClicked:function(e,t){if(-1!=t){var r=e.indicesSelected.findIndex(function(e){return e==t});-1==r?e.indicesSelected.push(t):e.indicesSelected.splice(r,1)}else e.indicesSelected=[]},busy:function(e,t){e.busy=t},busyLoading:function(e,t){e.busyLoading=t},swap:function(e,t){var r=t.indexFrom,a=t.indexTo,i=e.imageDataArray[a],n=e.imageDataKeysArray[a],s=e.imageDataUrlsArray[a],o=e.imageFileArray[a],u=e.imageFieldOfViewArray[a],c=e.imageFieldOfViewInitialArray[a];e.imageDataArray.splice(a,1,e.imageDataArray[r]),e.imageDataKeysArray.splice(a,1,e.imageDataKeysArray[r]),e.imageDataUrlsArray.splice(a,1,e.imageDataUrlsArray[r]),e.imageFileArray.splice(a,1,e.imageFileArray[r]),e.imageFieldOfViewArray.splice(a,1,e.imageFieldOfViewArray[r]),e.imageFieldOfViewInitialArray.splice(a,1,e.imageFieldOfViewInitialArray[r]),e.imageDataArray.splice(r,1,i),e.imageDataKeysArray.splice(r,1,n),e.imageDataUrlsArray.splice(r,1,s),e.imageFileArray.splice(r,1,o),e.imageFieldOfViewArray.splice(r,1,u),e.imageFieldOfViewInitialArray.splice(r,1,c)},removeSelected:function(e){e.imageDataArray=e.imageDataArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageDataKeysArray=e.imageDataKeysArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageDataUrlsArray=e.imageDataUrlsArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageFileArray=e.imageFileArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageFieldOfViewArray=e.imageFieldOfViewArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageFieldOfViewInitialArray=e.imageFieldOfViewInitialArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.indicesSelected=[]},removeAll:function(e){e.imageDataArray=[],e.imageDataKeysArray=[],e.imageDataUrlsArray=[],e.imageFileArray=[],e.imageFieldOfViewArray=[],e.imageFieldOfViewInitialArray=[],e.indicesSelected=[]},freeImageData:function(e){var t=e.imageDataArray.length;e.imageDataArray=[],e.imageDataArray=new Array(t).fill(null)},initCalled:function(e){e.initCalled=!0}},yi={loadDefaultImages:function(e){var t=e.getters["imageDataArray"];t&&t.length>0&&e.commit("removeAll");for(var r=[ci.a,mi.a,pi.a],a=function(){var t=r[i],a=new Image;a.onload=function(){try{var t=qa.imageDataFromImageSrc(a);e.commit("imageData",t),e.commit("_imageDataUrl",qa.imageSrcFromImageData(t)),e.commit("imageFieldOfView",45),e.commit("imageFieldOfViewInitial",45),a.onload=null}finally{e.commit("busy",!1)}},t&&(a.src=t,e.commit("busy",!0))},i=0;i<r.length;i++)a()},init:function(e){e.getters["initCalled"]||(e.commit("initCalled"),e.dispatch("loadDefaultImages"))},imageData:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,i=t.dispatch,n=t.rootGetters,!r||!n["worker/ready"]){e.next=11;break}if(s=n["settings/param"](me.imageCapInput.id),!(r.width*r.height>s)){e.next=11;break}if(o=Math.sqrt(s/(r.width*r.height)),u=Math.floor(r.height*o),c=Math.floor(r.width*o),!n["worker/ready"]){e.next=10;break}return e.next=10,i("worker/setMultiInputImageResized",{imageDataSrc:r,width:c,height:u},{root:!0});case 10:return e.abrupt("return");case 11:return a("imageData",r),e.next=14,i("imageDataUrl",r);case 14:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageDataUrl:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,i=t.dispatch,n=t.rootGetters,r){e.next=4;break}return a("_imageDataUrl",null),e.abrupt("return");case 4:if(s=n["settings/param"](me.multiStitch_limitInputView.id),!(r.width*r.height>s)){e.next=13;break}if(o=Math.sqrt(s/(r.width*r.height)),u=Math.floor(r.height*o),c=Math.floor(r.width*o),!n["worker/ready"]){e.next=12;break}return e.next=12,i("worker/setMultiInputImageUrlResized",{imageDataSrc:r,width:c,height:u},{root:!0});case 12:return e.abrupt("return");case 13:n["worker/ready"]&&a("_imageDataUrl",qa.imageSrcFromImageData(r));case 14:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageFile:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getters["busy"],e.abrupt("return",new Ba.a(function(e){var i=new Image;i.onload=Object(ar["a"])(regeneratorRuntime.mark(function n(){var s,o;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s=qa.imageDataFromImageSrc(i),n.next=4,t.dispatch("imageData",s);case 4:return t.commit("_imageFile",r),n.next=7,Ga.getFieldOfViewAsync(i);case 7:o=n.sent,o?(t.commit("imageFieldOfView",o),t.commit("imageFieldOfViewInitial",o)):(t.commit("imageFieldOfView",45),t.commit("imageFieldOfViewInitial",45)),i.onload=null,URL.revokeObjectURL(i.src);case 11:return n.prev=11,a||t.commit("busy",!1),e(),n.finish(11);case 15:case"end":return n.stop()}},n,this,[[0,,11,15]])})),r&&(a||t.commit("busy",!0),i.src=URL.createObjectURL(r))}));case 2:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageFiles:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,m,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(e.prev=0,t.commit("busy",!0),a=[],i=!0,n=!1,s=void 0,e.prev=6,o=l()(r);!(i=(u=o.next()).done);i=!0)c=u.value,a.push(c);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),n=!0,s=e.t0;case 14:e.prev=14,e.prev=15,i||null==o.return||o.return();case 17:if(e.prev=17,!n){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:m=0;case 23:if(!(m<a.length)){e.next=30;break}return d=a[m],e.next=27,t.dispatch("imageFile",d);case 27:m++,e.next=23;break;case 30:return e.prev=30,t.commit("busy",!1),e.finish(30);case 33:case"end":return e.stop()}},e,this,[[0,,30,33],[6,10,14,22],[15,,17,21]])}));function t(t,r){return e.apply(this,arguments)}return t}(),removeAllOrSelected:function(e){0==e.getters["indicesSelected"].length?e.commit("removeAll"):e.commit("removeSelected")},reloadFilesFromDisc:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters["imageFileArray"],t.commit("removeAll"),e.next=4,t.dispatch("imageFiles",r);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),reloadFilesFromDiscIf:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.getters["imageFileArray"].length){e.next=2;break}return e.abrupt("return");case 2:if(0!=t.getters["imageDataArray"].length&&null!=t.getters["imageDataArray"][0]){e.next=5;break}return e.next=5,t.dispatch("reloadFilesFromDisc");case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},vi={namespaced:!0,state:gi,getters:hi,mutations:fi,actions:yi},bi=r("21a6"),wi=(r("6aa2"),q()()),Ii=q()(),_i="load",xi="init",ki="params",Si="match",Di="reset",Ti="alignedImage",Ai="blendedImage",Oi="stitchedImage",Vi="stitch",Ci="stitchedImageWithKeyPoints",Ri="blendedImagePolygonFixedImage",ji="blendedImagePolygonMovingImage",Fi="blendedImageFloodFillFixedImage",Pi="blendedImageFloodFillMovingImage",Mi="sideBySideImageGood",Ni="sideBySideImageGoodInliers",$i="keyPointsFixedImageGood",Li="keyPointsMovingImageGood",Ei="keyPointsFixedImageInlier",Bi="keyPointsMovingImageInlier",qi="detCompareImage",zi="cInfo",Ui="cError",Gi="cLog",Wi="cAssert",Ki="resize",Yi="multiStitchInit",Hi="multiStitchReset",Xi="multiStitchParams",Ji="multiStitch",Qi="multiStitchStart",Zi="multiStitchNext",en=function(){function e(t){if(Object(L["a"])(this,e),t!=Ii)throw"Cannot construct Singleton!";this._init()}return Object(E["a"])(e,[{key:"_init",value:function(){var e=this;this.worker=new Worker("js/imgalign.worker.js"),this.worker.onmessage=function(t){return e._handleMessage(t)},this.worker.onerror=function(t){return e._handleError(t)}}},{key:"reInitWorker",value:function(){this.__messageDone=null,this.worker.terminate(),this.__messageAbort&&this.__messageAbort(),this.__messageAbort=null,this._init()}},{key:"postWorkerMessageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ba.a(function(e,a){r.__messageDone=function(){e.apply(void 0,arguments)},r.__messageAbort=function(){a("ignore")},r.__error=function(e){return a(e)},r.worker.postMessage(t)}));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetWorkerDataAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Di});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"resetMultiStitchWorkerDataAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Hi});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:_i,payload:{workerFileName:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_initAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:xi,payload:{fixedImage:t,movingImage:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_multiStitchInitAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Yi,payload:{images:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_matchAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Si,payload:{fixedImagePolygonPts:t,movingImagePolygonPts:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_setParams",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ki,payload:t.filter(function(e){return 301!=e.id})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_multiStitchSetParams",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Xi,payload:t.filter(function(e){return 301!=e.id})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_multiStitch",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ji,payload:{fieldsOfView:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_multiStitchStart",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Qi,payload:{fieldsOfView:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_compareAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:qi,payload:{imageType:t,detTypesArr:r,fixedImagePolygonPts:a,movingImagePolygonPts:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i){return e.apply(this,arguments)}return t}()},{key:"compare_requestImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n,s,o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._initAsync(t,r);case 2:return e.next=4,this._setParams(a);case 4:return e.next=6,this._compareAsync(i,n,s,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n,s,o){return e.apply(this,arguments)}return t}()},{key:"stitchAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n,s,o,u,c,l,m,d){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Vi,payload:{projectionType1:t,projectionType2:r,seamBlend:a,colorTransfer:i,fieldOfViewFixedImage:n,fieldOfViewMovingImage:s,calcRotationYaw2:o,calcRotationPitch2:u,yaw1:c,pitch1:l,yaw2:m,pitch2:d}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n,s,o,u,c,l,m,d){return e.apply(this,arguments)}return t}()},{key:"matchAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._initAsync(t,r);case 2:return e.next=4,this._setParams(a);case 4:return e.next=6,this._matchAsync(i,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n){return e.apply(this,arguments)}return t}()},{key:"multiStitch",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchInitAsync(t);case 2:return e.next=4,this._multiStitchSetParams(a);case 4:return e.next=6,this._multiStitch(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"multiStitchRecompute",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchSetParams(r);case 2:return e.next=4,this._multiStitch(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"multiStitchStart",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchInitAsync(t);case 2:return e.next=4,this._multiStitchSetParams(a);case 4:return e.next=6,this._multiStitchStart(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"multiStitchNext",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Zi});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"multiStitchStartRecompute",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchSetParams(r);case 2:return e.next=4,this._multiStitchStart(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"requestAlignedImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ti});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestBlendedImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ai,payload:{weight:t,doOverlay:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"requestStitchedImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Oi,payload:{weight:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestStitchedImageWithKeyPointsAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ci,payload:{weight:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestBlendedImagePolygonAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:i?Ri:ji,payload:{weight:t,doOverlay:r,polygon:a,isFixedImage:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i){return e.apply(this,arguments)}return t}()},{key:"requestBlendedImageFloodFillAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:n?Fi:Pi,payload:{weight:t,doOverlay:r,pts:a,floodFillTolerances:i,isFixedImage:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n){return e.apply(this,arguments)}return t}()},{key:"requestSideBySideImageGoodAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Mi});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestSideBySideImageGoodInliersAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ni});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsGoodFixedImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:$i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsGoodMovingImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Li});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsInlierFixedImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ei});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsInlierMovingImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Bi});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestResizedImageAsync",value:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Ki,payload:{image:t,width:r,height:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"_messageDone",value:function(){this.__messageDone&&(this.__messageDone.apply(this,arguments),this.__messageDone=null)}},{key:"_getImageData",value:function(e){if(0==e.width||0==e.height)return null;var t=new Uint8ClampedArray(e.buf,e.byteOffset,e.bufLen);return new ImageData(t,e.width,e.height)}},{key:"_messageImage",value:function(e){this._messageDone(this._getImageData(e))}},{key:"_messageCompareImage",value:function(e){this._messageDone({imageData:this._getImageData(e),timeUsedArr:e.additionalData.timeUsedArr,keyPointsCountArr:e.additionalData.keyPointsCountArr})}},{key:"_messageStitchedImage",value:function(e){this._messageDone({imageData:this._getImageData(e),fieldOfView:e.additionalData})}},{key:"_messageMultiStitchImage",value:function(e){this._messageDone({imageData:this._getImageData(e),imageDataSmall:e.imageDataSmall?this._getImageData(e.imageDataSmall):null,stitchedImagesN:e.additionalData})}},{key:"_messageMultiStitchImageStart",value:function(e){this._messageDone({imageData:this._getImageData(e),stitchIndices:e.additionalData})}},{key:"_handleMessage",value:function(e){if(!this._handleLogMessages(e.data)){if("done"!=e.data.info)throw new Error("Unknown message info: ".concat(e.data.info));switch(e.data.msg){case _i:case xi:case ki:case Si:case Di:case Yi:case Hi:case Xi:this._messageDone(e.data.payload);break;case Ti:case Ai:case Oi:case Ci:case Ri:case ji:case Fi:case Pi:case Mi:case Ni:case $i:case Li:case Ei:case Bi:case Ki:this._messageImage(e.data.payload);break;case Qi:this._messageMultiStitchImageStart(e.data.payload);break;case qi:this._messageCompareImage(e.data.payload);break;case Vi:this._messageStitchedImage(e.data.payload);break;case Ji:case Zi:this._messageMultiStitchImage(e.data.payload);break;default:}console.log("[WorkerClient][_handleMessage][".concat(e.data.msg,"][success]"))}}},{key:"_handleError",value:function(e){if(this.__error)this.__error(e),this.__error=null;else{var t="Line: "+(e.lineno?e.lineno:"unknown "),r="File: "+(e.filename?e.filename:"unknown "),a="Message: "+(e.message?e.message:"unknown");console.log("[WorkerClient][_handleError]: "+t+r+a)}}},{key:"_handleLogMessages",value:function(e){var t,r,a,i,n=e.msg,s=e.info,o=e.payload;function u(e,t){return"extern"==e?["opencv"].concat(Object(m["a"])(t)):t}switch(n){case Gi:return(t=console).log.apply(t,Object(m["a"])(u(s,o))),!0;case zi:return(r=console).info.apply(r,Object(m["a"])(u(s,o))),!0;case Ui:return(a=console).error.apply(a,Object(m["a"])(u(s,o))),!0;case Wi:return(i=console).assert.apply(i,Object(m["a"])(u(s,o))),!0;default:return!1}}}],[{key:"instance",get:function(){return this[wi]||(this[wi]=new e(Ii)),this[wi]}}]),e}(),tn=H()({aligned:"Aligned",blended:"Blended",stitched:"Stitched",stitchedWithKeyPoints:"Stitched key points",sideBySideGood:"Side by side good matches",sideBySideGoodInliers:"Side by side inlier matches",selectionImage1:"Align selection image 1",selectionImage2:"Align selection image 2",keyPointsGoodFixed:"Matched key points image 1",keyPointsGoodMoving:"Matched Key points image 2",keyPointsInlierFixed:"Inlier key points image 1",keyPointsInlierMoving:"Inlier key points image 2"}),rn=(tn.aligned,r("308d")),an=r("6bb5"),nn=r("4e2b"),sn=r("7618"),on=function(){function e(){Object(L["a"])(this,e),this.params=[{id:me.detType.id,type:ge.discrete,defaultValue:me.detType_sift.id,value:me.detType_sift.id,values:this.getDiscreteParams(me.detType.id)},{id:me.desType.id,type:ge.discrete,defaultValue:me.desType_sift.id,value:me.desType_sift.id,values:this.getDiscreteParams(me.desType.id)},{id:me.matcherType.id,type:ge.discrete,defaultValue:me.matcherType_auto.id,value:me.matcherType_auto.id,values:this.getDiscreteParams(me.matcherType.id)},{id:me.transformFinderType.id,type:ge.discrete,defaultValue:me.transformFinderType_ransac.id,value:me.transformFinderType_ransac.id,values:this.getDiscreteParams(me.transformFinderType.id)},{id:me.compareDetTypes.id,type:ge.multiple,defaultValue:[me.detType_sift.id,me.detType_orb.id,me.detType_akaze.id].toString(),value:[me.detType_sift.id,me.detType_orb.id,me.detType_akaze.id].toString(),values:this.getDiscreteParams(me.detType.id)},{id:me.compareImageType.id,type:ge.discrete,defaultValue:me.imageFirst.id,value:me.imageFirst.id,values:this.getDiscreteParams(me.compareImageType.id)},{id:me.imageCap.id,type:ge.rangeSquareRoot,defaultValue:4e6,value:4e6,range:{min:1e4,max:4e6}},{id:me.imageCapInput.id,type:ge.rangeSquareRoot,defaultValue:4e6,value:4e6,range:{min:1e4,max:4e6}},{id:me.floodFillTolerance.id,type:ge.range,defaultValue:20,value:20,range:{min:0,max:255}},{id:me.alignSelectionOverlay.id,type:ge.bool,defaultValue:1,value:1},{id:me.logInfoEnabled.id,type:ge.bool,defaultValue:0,value:0},{id:me.logErrorEnabled.id,type:ge.bool,defaultValue:1,value:1},{id:me.logAssertEnabled.id,type:ge.bool,defaultValue:1,value:1},{id:me.logExternEnabled.id,type:ge.bool,defaultValue:0,value:0},{id:me.sift_featuresN.id,type:ge.number,value:0,defaultValue:0},{id:me.sift_octaveLayersN.id,type:ge.number,value:3,defaultValue:3},{id:me.sift_contrastThresh.id,type:ge.number,value:.04,defaultValue:.04},{id:me.sift_edgeThresh.id,type:ge.number,value:10,defaultValue:10},{id:me.sift_sigma.id,type:ge.number,value:1.6,defaultValue:1.6},{id:me.surf_hessianThresh.id,type:ge.number,value:100,defaultValue:100},{id:me.surf_octavesN.id,type:ge.number,value:4,defaultValue:4},{id:me.surf_octaveLayersN.id,type:ge.number,value:3,defaultValue:3},{id:me.surf_extended.id,type:ge.bool,value:0,defaultValue:0},{id:me.orb_featuresN.id,type:ge.number,value:500,defaultValue:500},{id:me.orb_scale.id,type:ge.number,value:1.2,defaultValue:1.2},{id:me.orb_levelsN.id,type:ge.number,value:8,defaultValue:8},{id:me.orb_edgeThresh.id,type:ge.number,value:31,defaultValue:31},{id:me.orb_patchSize.id,type:ge.number,value:31,defaultValue:31},{id:me.brisk_thresh.id,type:ge.number,value:30,defaultValue:30},{id:me.brisk_octavesN.id,type:ge.number,value:3,defaultValue:3},{id:me.brisk_patternScale.id,type:ge.number,value:1,defaultValue:1},{id:me.kaze_thresh.id,type:ge.number,value:.001,defaultValue:.001},{id:me.kaze_octavesN.id,type:ge.number,value:4,defaultValue:4},{id:me.kaze_octaveLayersN.id,type:ge.number,value:4,defaultValue:4},{id:me.akaze_thresh.id,type:ge.number,value:.001,defaultValue:.001},{id:me.akaze_octavesN.id,type:ge.number,value:4,defaultValue:4},{id:me.akaze_octaveLayersN.id,type:ge.number,value:4,defaultValue:4},{id:me.matchFilterSpreadAuto.id,type:ge.bool,value:1,defaultValue:1},{id:me.matchFilterSpreadFactor.id,type:ge.number,value:2.2,defaultValue:2.2},{id:me.matchFilterMinMatchesToRetain.id,type:ge.number,value:300,defaultValue:300},{id:me.matchFilterMaxMatchesToRetain.id,type:ge.number,value:1600,defaultValue:1600},{id:me.stitch_projection.id,type:ge.discrete,defaultValue:me.stitch_projectionTypeSpherical.id,value:me.stitch_projectionTypeSpherical.id,values:this.getDiscreteParams(me.stitch_projection.id)},{id:me.stitch_projection2.id,type:ge.discrete,defaultValue:me.stitch_projectionTypeSpherical.id,value:me.stitch_projectionTypeSpherical.id,values:this.getDiscreteParams(me.stitch_projection2.id)},{id:me.stitch_seamBlend.id,type:ge.bool,value:1,defaultValue:1},{id:me.stitch_colorTransfer.id,type:ge.bool,value:0,defaultValue:0},{id:me.stitch_fieldOfView1.id,type:ge.numberAuto,value:45,defaultValue:45},{id:me.stitch_yaw1.id,type:ge.numberAuto,value:0,defaultValue:0},{id:me.stitch_pitch1.id,type:ge.numberAuto,value:0,defaultValue:0},{id:me.stitch_fieldOfView2.id,type:ge.numberAuto,value:45,defaultValue:45},{id:me.stitch_yaw2.id,type:ge.numberAuto,value:0,defaultValue:0,flagId:me.stitch_yaw2Auto.id},{id:me.stitch_pitch2.id,type:ge.numberAuto,value:0,defaultValue:0,flagId:me.stitch_pitch2Auto.id},{id:me.stitch_yaw2Auto.id,type:ge.bool,value:1,defaultValue:1},{id:me.stitch_pitch2Auto.id,type:ge.bool,value:1,defaultValue:1},{id:me.multiStitch_projectionType.id,type:ge.discrete,value:me.stitch_projectionTypeSpherical.id,defaultValue:me.stitch_projectionTypeSpherical.id,values:this.getDiscreteParams(me.multiStitch_projectionType.id)},{id:me.multiStitch_rectifyPerspective.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_rectifyStretch.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_maxRectangle.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_camEstimate.id,type:ge.bool,value:1,defaultValue:1},{id:me.multiStitch_bundleAdjust.id,type:ge.discrete,value:me.bat_rayBlacklist.id,defaultValue:me.bat_rayBlacklist.id,values:this.getDiscreteParams(me.multiStitch_bundleAdjust.id)},{id:me.multiStitch_waveCorrection.id,type:ge.discrete,value:me.waveCorrectionType_H.id,defaultValue:me.waveCorrectionType_H.id,values:this.getDiscreteParams(me.multiStitch_waveCorrection.id)},{id:me.multiStitch_seamBlend.id,type:ge.bool,value:1,defaultValue:1},{id:me.multiStitch_seamFinderType.id,type:ge.discrete,value:me.seamFinderType_Vornoi.id,defaultValue:me.seamFinderType_Vornoi.id,values:this.getDiscreteParams(me.multiStitch_seamFinderType.id)},{id:me.multiStitch_blendStrength.id,type:ge.range,defaultValue:5,value:5,range:{min:0,max:100}},{id:me.multiStitch_colorTransfer.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_exposureCompensator.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_calcCenterImage.id,type:ge.bool,value:1,defaultValue:1},{id:me.multiStitch_warpFirst.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_confidenceThresh.id,type:ge.range,defaultValue:.4,value:.4,range:{min:0,max:3},step:.01},{id:me.multiStitch_inputImagesMatchReach.id,type:ge.range,defaultValue:0,value:0,range:{min:1,max:40,maxReplace:0},step:1},{id:me.multiStitch_limitResultPreview.id,type:ge.rangeSquareRoot,defaultValue:1e8,value:1e8,range:{min:1e4,max:1e8}},{id:me.multiStitch_limitInputView.id,type:ge.rangeSquareRoot,defaultValue:1e9,value:1e9,range:{min:1e4,max:1e9}},{id:me.multiStitch_disposeInputImages.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_limitLiveStitchingPreview.id,type:ge.rangeSquareRoot,defaultValue:1e9,value:1e9,range:{min:1e4,max:1e9}},{id:me.multiStitch_preserveAlphaChannelValue.id,type:ge.bool,value:0,defaultValue:0},{id:me.multiStitch_liveUpdateCycle.id,type:ge.range,defaultValue:5,value:5,range:{min:1,max:20}},{id:me.openCvType.id,type:ge.discrete,value:me.openCvType_small.id,defaultValue:me.openCvType_small.id,values:this.getDiscreteParams(me.openCvType.id)}]}return Object(E["a"])(e,[{key:"getDiscreteParams",value:function(e){return K()(me).filter(function(t){return me[t].groupId==e||me[t].groupId2&&me[t].groupId2==e||me[t].groupId3&&me[t].groupId3==e}).map(function(e){return me[e]})}},{key:"getParamDefaultValueById",value:function(e){return this._getParamById(e).defaultValue}},{key:"getParamValueById",value:function(e){return this._getParamById(e).value}},{key:"getParamValuesById",value:function(e){var t=this._getParamById(e);return this._throwIfNotMultiple(t),this._valueToArray(t.value)}},{key:"getParamDefaultValuesById",value:function(e){var t=this._getParamById(e);return this._throwIfNotMultiple(t),this._valueToArray(t.defaultValue)}},{key:"getParamValueNamesById",value:function(e){var t=this.getParamValuesById(e);return t.map(function(e){return pe.getParamName(e)})}},{key:"setParamValueById",value:function(e,t){var r=this._getParamById(e);r.value=t}},{key:"getIdArr",value:function(){return this.params.map(function(e){return e.id})}},{key:"getIdValueArr",value:function(){return this.params.map(function(e){return{id:e.id,value:e.value}})}},{key:"getIdValueArrExcludingDefaults",value:function(){return this.params.filter(function(e){return e.value!=e.defaultValue}).map(function(e){return{id:e.id,value:e.value}})}},{key:"getIdValueDefaultArr",value:function(){return this.params.map(function(e){return{id:e.id,value:e.value,defaultValue:e.defaultValue}})}},{key:"setByIdValueArr",value:function(e){var t=this;e.forEach(function(e){t.setParamValueById(e.id,e.value)})}},{key:"removeInvalidParams",value:function(e){var t=this;return e=e.filter(function(e){var r=t.params.find(function(t){return t.id==e.id});if(!r)return!1;if(r.type==ge.discrete){var a=t.getDiscreteParams(r.id);if(!a||!a.find(function(t){return t.id==e.value}))return!1}else if((r.type==ge.range||r.type==ge.rangeSquareRoot)&&(e.value<r.range.min||e.value>r.range.max))return!1;return!0}),e}},{key:"equals",value:function(e){if(null==e)return!this.params||0==this.params.length;if(e.length!=this.params.length)return!1;for(var t=0;t<e.length;++t){if(e[t].id!=this.params[t].id)return!1;if(e[t].value!=this.params[t].value)return!1}return!0}},{key:"getRelatingIdValue",value:function(e,t){switch(e){case me.detType.id:switch(t){case me.detType_sift.id:return{id:me.desType.id,value:me.desType_sift.id};case me.detType_surf.id:return{id:me.desType.id,value:me.desType_surf.id};case me.detType_orb.id:return{id:me.desType.id,value:me.desType_orb.id};case me.detType_brisk.id:return{id:me.desType.id,value:me.desType_brisk.id};case me.detType_kaze.id:return{id:me.desType.id,value:me.desType_kaze.id};case me.detType_akaze.id:return{id:me.desType.id,value:me.desType_akaze.id};default:return null}default:return null}}},{key:"getCurrentDetTypeGroupKey",value:function(){var e=this.params.find(function(e){return e.id==me.detType.id}),t=K()(me).find(function(t){return me[t].id==e.value}),r=me[t].name;return K()(X).find(function(e){return X[e].name==r})}},{key:"paramsByGroupKey",value:function(e){var t=this;return K()(me).filter(function(t){return me[t].groupId==X[e].id||me[t].groupId&&me[t].groupId==X[e].id}).map(function(e){return t.params.find(function(t){return t.id==me[e].id})})}},{key:"copyValuesTo",value:function(e){console.assert(this.params.length==e.params.length);for(var t=0;t<this.params.length;++t)console.assert(this.params[t].id===e.params[t].id),e.params[t].value!=this.params[t].value&&(e.params[t].value=this.params[t].value)}},{key:"getParamById",value:function(e){return this._getParamById(e)}},{key:"_getParamById",value:function(e){var t=this.params.find(function(t){return t.id==e});if(!t)throw new Error("No param with id ${id} exists");return t}},{key:"_throwIfNotMultiple",value:function(e){if(e.type!=ge.multiple)throw new Error("Param id/name ".concat(e.id,"/").concat(e.name," is not capable"))}},{key:"_valueToArray",value:function(e){return e?isNaN(Number(e))?e.split(",").map(function(e){return+e}):[+e]:[]}}]),e}(),un=function(){function e(t,r){if(Object(L["a"])(this,e),this._imageData=null,this._imageDataUrl=null,this._success=null,this._time=0,this._name=t,this._settings=new on,null==r||"function"==!Object(sn["a"])(r))throw new Error("Need a valid conversion function");this._imageDataToUrlFn=r}return Object(E["a"])(e,[{key:"setImageData",value:function(e,t){this._imageData=e,this._imageDataUrl=e?t?this._imageDataToUrlFn(t):this._imageDataToUrlFn(e):null}},{key:"name",get:function(){return this.name}},{key:"imageData",get:function(){return this._imageData},set:function(e){this._imageData=e,this._imageDataUrl=e?this._imageDataToUrlFn(e):null}},{key:"imageDataUrl",get:function(){return this._imageDataUrl}},{key:"imageDataValid",get:function(){return this._imageData&&this._imageData.width>0&&this._imageData.height>0}},{key:"success",get:function(){return this._success},set:function(e){this._success=e}},{key:"time",get:function(){return this._time},set:function(e){this._time=e}},{key:"settings",get:function(){return this._settings},set:function(e){this._settings=e}}]),e}(),cn=function(e){function t(e,r){var a;return Object(L["a"])(this,t),a=Object(rn["a"])(this,Object(an["a"])(t).call(this,e,r)),a._fieldOfView=null,a}return Object(nn["a"])(t,e),Object(E["a"])(t,[{key:"fieldOfView",get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=e}}]),t}(un),ln={imageResults:Object(La["a"])({},ba,new cn(va,qa.imageSrcFromImageData))},mn={imageData:function(e){return function(t){return e.imageResults[t].imageData}},imageDataUrl:function(e){return function(t){return e.imageResults[t].imageDataUrl}},imageDataValid:function(e){return function(t){return e.imageResults[t].imageDataValid}},success:function(e){return function(t){return e.imageResults[t].success}},time:function(e){return function(t){return e.imageResults[t].time}},settings:function(e){return function(t){return e.imageResults[t].settings}},multiStitcherFieldOfView:function(e){return e.imageResults[ba].fieldOfView}},dn={imageData:function(e,t){var r=t.name,a=t.imageData,i=t.imageDataSmall;a?e.imageResults[r].setImageData(a,i):e.imageResults[r].imageData=null},success:function(e,t){var r=t.name,a=t.success;e.imageResults[r].success=a},time:function(e,t){var r=t.name,a=t.time;e.imageResults[r].time=a},settings:function(e,t){var r=t.name,a=t.settings;a&&a.copyValuesTo(e.imageResults[r].settings)},multiStitcherFieldOfView:function(e,t){return e.imageResults[ba].fieldOfView=t}},pn={},gn={namespaced:!0,state:ln,getters:mn,mutations:dn,actions:pn},hn={loadStartTime:null,loadTime:null,ready:!1,error:null,busyImage:!1,busyCompute:!1,busyLoad:!1,currentActionInfo:"",lastCompletedActionTime:0,currentActionStartTime:null,currentComputeTime:null,currentLoadingTime:null},fn={ready:function(e){return e.ready},loadTime:function(e){return e.loadTime},error:function(e){return e.error},busy:function(e){return e.busyImage||e.busyCompute||e.busyLoad},busyImage:function(e){return e.busyImage},busyCompute:function(e){return e.busyCompute},busyLoad:function(e){return e.busyLoad},currentActionInfo:function(e){return e.currentActionInfo},currentActionTime:function(e){return e.currentActionInfo&&e.currentActionStartTime?new Date-e.currentActionStartTime:null},lastCompletedActionTime:function(e){return e.lastCompletedActionTime},currentComputeTime:function(e){return e.currentComputeTime},currentLoadingTime:function(e){return e.currentLoadingTime}},yn={_init:function(e){e.ready||(e.loadStartTime=new Date)},_ready:function(e,t){t&&e.loadStartTime&&(e.loadTime=new Date-e.loadStartTime),e.ready=t,console.log("[store][worker][mutation][ready][time][ms]: ".concat(e.loadTime,", ").concat(t))},error:function(e,t){e.error=t},_busyCompute:function(e,t){e.busyCompute=t},_busyImage:function(e,t){e.busyImage=t},_busyLoad:function(e,t){e.busyLoad=t},currentActionInfo:function(e,t){e.currentActionInfo=t,t?e.currentActionStartTime=new Date:e.currentActionStartTime&&(e.lastCompletedActionTime=new Date-e.currentActionStartTime,e.currentActionStartTime=null)},currentComputeTime:function(e,t){e.currentComputeTime=t},currentLoadingTime:function(e,t){e.currentLoadingTime=t}},vn={load:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["ready"]){e.next=2;break}return e.abrupt("return");case 2:if(!t.getters["busy"]){e.next=4;break}return e.abrupt("return");case 4:return t.commit("_busyLoad",!0),t.commit("_init",t),t.commit("currentActionInfo","Loading opencv"),e.prev=7,r=t.rootGetters["settings/param"](me.openCvType.id),a="opencv_3_4_custom_Oz.js",r==me.openCvType_fast.id&&(a="opencv_3_4_custom_O3.js"),e.next=13,en.instance.loadAsync(a);case 13:t.commit("_ready",!0),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](7),console.log("[store][worker][load][Error]",e.t0),t.commit("error",e.t0);case 20:return e.prev=20,t.commit("currentActionInfo",""),t.commit("_busyLoad",!1),e.finish(20);case 24:case"end":return e.stop()}},e,this,[[7,16,20,24]])}));function t(t){return e.apply(this,arguments)}return t}(),reload:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return en.instance.reInitWorker(),t.commit("error",null),t.commit("_busyCompute",!1),t.commit("_ready",!1),e.next=6,t.dispatch("load");case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),error:function(e,t){e.commit("error",t)},resetWorkerData:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,en.instance.resetWorkerDataAsync();case 4:t.commit("results/success",{name:fa,success:0}),t.commit("error",null);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),multiStitchResetWorkerData:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,en.instance.resetMultiStitchWorkerDataAsync();case 4:t.commit("results/success",{name:ba,success:0}),t.commit("error",null);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_requestImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}throw new Error("Cannot request image while busy");case 2:if(t.getters["results/success"](fa)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t.commit("_busyImage",!0),t.commit("error",null),e.next=9,r();case 9:a=e.sent,t.commit("results/imageData",{name:fa,imageData:a}),e.next=19;break;case 13:e.prev=13,e.t0=e["catch"](4),console.log("[store][worker][generic][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:fa,imageData:null}),t.commit("results/success",{name:fa,success:0});case 19:return e.prev=19,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(19);case 23:case"end":return e.stop()}},e,this,[[4,13,19,23]])}));function t(t,r){return e.apply(this,arguments)}return t}(),computeMultiStitchedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.images,i=r.fieldsOfView,n=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Stitching"),s=new Date,e.next=10,en.instance.multiStitch(a,i,n.getIdValueArrExcludingDefaults());case 10:o=e.sent,u=o.imageData,c=o.stitchedImagesN,t.commit("results/imageData",{name:ba,imageData:u}),t.commit("results/time",{name:ba,time:new Date-s}),t.commit("results/success",{name:ba,success:c==a.length?1:0}),e.next=24;break;case 18:e.prev=18,e.t0=e["catch"](3),console.log("[store][worker][computeStitchedImage][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:ba,imageData:null}),t.commit("results/success",{name:ba,success:0});case 24:return e.prev=24,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(24);case 28:case"end":return e.stop()}},e,this,[[3,18,24,28]])}));function t(t,r){return e.apply(this,arguments)}return t}(),computeMultiStitchImageInSteps:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,m,d,p,g,h,f,y,v;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.images,i=r.fieldsOfView,n=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Detecting Features"),s=new Date,e.next=10,en.instance.multiStitchStart(a,i,n.getIdValueArrExcludingDefaults());case 10:for(o=e.sent,u=o.imageData,c=o.stitchIndices,l=t.rootGetters["settings/param"](me.multiStitch_disposeInputImages.id),l&&t.commit("multiInput/freeImageData",null,{root:!0}),m=[],d=function(e){c.some(function(t){return t==e})||m.push(e)},p=0;p<a.length;++p)d(p);m.length>0&&(console.warn("[store][worker][computeMultiStitchImageInSteps]","No match found for image/s with index ".concat(m.map(function(e){return" "+e}))),t.commit("logs/addErrorMessage","No match found for image/s with index ".concat(m.map(function(e){return" "+e})),{root:!0})),t.commit("results/imageData",{name:ba,imageData:u}),g=c.length-1;case 21:if(!(g>0)){e.next=31;break}return e.next=24,en.instance.multiStitchNext();case 24:h=e.sent,f=h.imageData,y=h.imageDataSmall,v=h.stitchedImagesN,0==v?(g=0,console.warn("[store][worker][computeMultiStitchImageInSteps]","Unexpected result from multiStitchNext")):(g=c.length-v,t.commit("results/imageData",{name:ba,imageData:f,imageDataSmall:y})),e.next=21;break;case 31:t.commit("results/time",{name:ba,time:new Date-s}),t.commit("results/success",{name:ba,success:1}),e.next=40;break;case 35:e.prev=35,e.t0=e["catch"](3),console.log("[store][worker][computeMultiStitchImageInSteps][Error]",e.t0),t.commit("error",e.t0),t.commit("results/success",{name:ba,success:0});case 40:return e.prev=40,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(40);case 44:case"end":return e.stop()}},e,this,[[3,35,40,44]])}));function t(t,r){return e.apply(this,arguments)}return t}(),computeAlignedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.fixedImage,i=r.movingImage,n=r.fixedImagePolygonPts,s=r.movingImagePolygonPts,o=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Feature detection"),u=new Date,e.next=10,en.instance.matchAsync(a,i,o.getIdValueArrExcludingDefaults(),n,s);case 10:c=e.sent,t.commit("results/time",{name:fa,time:new Date-u}),t.commit("results/success",{name:fa,success:c}),e.next=21;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log("[store][worker][computeAlignedImage][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:fa,imageData:null}),t.commit("results/success",{name:fa,success:0});case 21:return e.prev=21,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(21);case 25:return e.next=27,t.dispatch("requestImage");case 27:case"end":return e.stop()}},e,this,[[3,15,21,25]])}));function t(t,r){return e.apply(this,arguments)}return t}(),requestImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.getters["results/matcherImageType"],e.t0=r,e.next=e.t0===tn.aligned?4:e.t0===tn.blended?7:e.t0===tn.stitched?10:e.t0===tn.stitchedWithKeyPoints?13:e.t0===tn.selectionImage1?16:e.t0===tn.selectionImage2?24:e.t0===tn.keyPointsGoodFixed?32:e.t0===tn.keyPointsGoodMoving?35:e.t0===tn.keyPointsInlierFixed?38:e.t0===tn.keyPointsInlierMoving?41:e.t0===tn.sideBySideGood?44:e.t0===tn.sideBySideGoodInliers?47:50;break;case 4:return e.next=6,t.dispatch("requestAlignedImage");case 6:return e.abrupt("break",51);case 7:return e.next=9,t.dispatch("requestBlendedImage",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](me.alignSelectionOverlay.id)});case 9:return e.abrupt("break",51);case 10:return e.next=12,t.dispatch("requestStitchedImage",{weight:t.getters["results/matcherImageBlend"]});case 12:return e.abrupt("break",51);case 13:return e.next=15,t.dispatch("requestStitchedImageWithKeyPoints",{weight:t.getters["results/matcherImageBlend"]});case 15:return e.abrupt("break",51);case 16:if(0===t.rootGetters["input/polygonClosedPts"](ga).length){e.next=21;break}return e.next=19,t.dispatch("requestBlendedImagePolygon",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](me.alignSelectionOverlay.id),polygon:t.rootGetters["input/polygonClosedPts"](ga),isFixedImage:!0});case 19:e.next=23;break;case 21:return e.next=23,t.dispatch("requestBlendedImageFloodFill",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](me.alignSelectionOverlay.id),pts:t.rootGetters["input/pathPts"](ga),floodFillTolerances:t.rootGetters["input/floodFillTolerances"](ga),isFixedImage:!0});case 23:return e.abrupt("break",51);case 24:if(0===t.rootGetters["input/polygonClosedPts"](ha).length){e.next=29;break}return e.next=27,t.dispatch("requestBlendedImagePolygon",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](me.alignSelectionOverlay.id),polygon:t.rootGetters["input/polygonClosedPts"](ha),isFixedImage:!1});case 27:e.next=31;break;case 29:return e.next=31,t.dispatch("requestBlendedImageFloodFill",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](me.alignSelectionOverlay.id),pts:t.rootGetters["input/pathPts"](ha),floodFillTolerances:t.rootGetters["input/floodFillTolerances"](ha),isFixedImage:!1});case 31:return e.abrupt("break",51);case 32:return e.next=34,t.dispatch("requestKeyPointsGoodFixedImage");case 34:return e.abrupt("break",51);case 35:return e.next=37,t.dispatch("requestKeyPointsGoodMovingImage");case 37:return e.abrupt("break",51);case 38:return e.next=40,t.dispatch("requestKeyPointsInlierFixedImage");case 40:return e.abrupt("break",51);case 41:return e.next=43,t.dispatch("requestKeyPointsInlierMovingImage");case 43:return e.abrupt("break",51);case 44:return e.next=46,t.dispatch("requestSideBySideImageGood");case 46:return e.abrupt("break",51);case 47:return e.next=49,t.dispatch("requestSideBySideImageGoodInliers");case 49:return e.abrupt("break",51);case 50:return e.abrupt("break",51);case 51:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestAlignedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting aligned image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestAlignedImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestBlendedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,i=r.doOverlay,t.commit("currentActionInfo","Requesting blended image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestBlendedImageAsync(a,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestStitchedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,t.commit("currentActionInfo","Requesting stitched image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestStitchedImageAsync(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestStitchedImageWithKeyPoints:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,t.commit("currentActionInfo","Requesting stitched image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestStitchedImageWithKeyPointsAsync(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestBlendedImagePolygon:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,i=r.doOverlay,n=r.polygon,s=r.isFixedImage,t.commit("currentActionInfo","Requesting blended image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestBlendedImagePolygonAsync(a,i,n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestBlendedImageFloodFill:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,i=r.doOverlay,n=r.pts,s=r.floodFillTolerances,o=r.isFixedImage,t.commit("currentActionInfo","Requesting blended image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestBlendedImageFloodFillAsync(a,i,n,s,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestSideBySideImageGood:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting side by side image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestSideBySideImageGoodAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestSideBySideImageGoodInliers:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting side by side image"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestSideBySideImageGoodInliersAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsGoodFixedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestKeyPointsGoodFixedImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsGoodMovingImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestKeyPointsGoodMovingImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsInlierFixedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestKeyPointsInlierFixedImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsInlierMovingImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(ar["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,en.instance.requestKeyPointsInlierMovingImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),computeCompareImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,m,d,p,g,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.fixedImage,i=r.movingImage,n=r.fixedImagePolygonPts,s=r.movingImagePolygonPts,o=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Feature detection"),u=o.getParamValuesById(me.compareDetTypes.id),c=o.getParamValueById(me.compareImageType.id),l=o.getIdValueArrExcludingDefaults(),m=new Date,e.next=13,en.instance.compare_requestImageAsync(a,i,l,c,u,n,s);case 13:d=e.sent,p=d.imageData,g=d.timeUsedArr,h=d.keyPointsCountArr,t.commit("results/imageData",{name:ya,imageData:p}),t.commit("results/compareTimeUsedPerDet",g),t.commit("results/compareKeyPointsCountPerDet",h),t.commit("results/time",{name:ya,time:new Date-m}),t.commit("results/success",{name:ya,success:1}),t.commit("results/settings",{name:ya,settings:o}),e.next=31;break;case 25:e.prev=25,e.t0=e["catch"](3),console.log("[store][worker][generic][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:ya,imageData:null}),t.commit("results/success",{name:ya,success:0});case 31:return e.prev=31,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(31);case 35:case"end":return e.stop()}},e,this,[[3,25,31,35]])}));function t(t,r){return e.apply(this,arguments)}return t}(),displayStitchedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n,s,o,u,c,l,m,d,p,g,h,f,y;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.commit("_busyImage",!0),t.commit("currentActionInfo","Stitching image"),r=t.rootGetters["settings/param"](me.stitch_projection.id),a=t.rootGetters["settings/param"](me.stitch_projection2.id),i=t.rootGetters["settings/param"](me.stitch_seamBlend.id),n=t.rootGetters["settings/param"](me.stitch_colorTransfer.id),s=t.rootGetters["settings/param"](me.stitch_fieldOfView1.id),o=t.rootGetters["settings/param"](me.stitch_fieldOfView2.id),u=t.rootGetters["settings/param"](me.stitch_yaw1.id),c=t.rootGetters["settings/param"](me.stitch_pitch1.id),l=t.rootGetters["settings/param"](me.stitch_yaw2.id),m=t.rootGetters["settings/param"](me.stitch_pitch2.id),d=t.rootGetters["settings/param"](me.stitch_yaw2Auto.id),p=t.rootGetters["settings/param"](me.stitch_pitch2Auto.id),e.next=19,en.instance.stitchAsync(r,a,i,n,s,o,d,p,u,c,l,m);case 19:g=e.sent,h=g.fieldOfView,f=g.imageData,y=a!=me.stitch_projectionTypeNone,t.commit("results/stitcherFieldOfView",Math.round(h)),t.commit("results/stitcherProjected",y),t.commit("results/imageData",{name:va,imageData:f}),e.next=33;break;case 28:e.prev=28,e.t0=e["catch"](2),console.log("[store][worker][displayStitchedImage][Error]",e.t0),t.commit("results/imageData",{name:va,imageData:null}),t.commit("error",e.t0);case 33:return e.prev=33,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(33);case 37:case"end":return e.stop()}},e,this,[[2,28,33,37]])}));function t(t){return e.apply(this,arguments)}return t}(),computeStitchedImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.fixedImage,i=r.movingImage,n=r.fixedImagePolygonPts,s=r.movingImagePolygonPts,o=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Feature detection"),u=new Date,e.next=10,en.instance.matchAsync(a,i,o.getIdValueArrExcludingDefaults(),n,s);case 10:c=e.sent,t.commit("results/time",{name:va,time:new Date-u}),t.commit("results/success",{name:va,success:c}),e.next=21;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log("[store][worker][computeStitchedImage][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:va,imageData:null}),t.commit("results/success",{name:va,success:0});case 21:return e.prev=21,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(21);case 25:case"end":return e.stop()}},e,this,[[3,15,21,25]])}));function t(t,r){return e.apply(this,arguments)}return t}(),setInputImageResized:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.imageName,i=r.imageDataSrc,n=r.width,s=r.height,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),t.commit("currentActionInfo","Resizing image"),e.next=8,en.instance.requestResizedImageAsync(i,n,s);case 8:o=e.sent,t.dispatch("input/imageData",{name:a,imageData:o},{root:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),console.log("[store][worker][setInputImageResized][Error]",e.t0),t.commit("error",e.t0);case 16:return e.prev=16,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(16);case 20:case"end":return e.stop()}},e,this,[[3,12,16,20]])}));function t(t,r){return e.apply(this,arguments)}return t}(),setMultiInputImageResized:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.imageDataSrc,i=r.width,n=r.height,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),t.commit("currentActionInfo","Resizing image"),e.next=8,en.instance.requestResizedImageAsync(a,i,n);case 8:return s=e.sent,t.commit("_busyImage",!1),e.next=12,t.dispatch("multiInput/imageData",s,{root:!0});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log("[store][worker][setMultiInputImageResized][Error]",e.t0),t.commit("error",e.t0);case 18:return e.prev=18,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(18);case 22:case"end":return e.stop()}},e,this,[[3,14,18,22]])}));function t(t,r){return e.apply(this,arguments)}return t}(),setMultiInputImageUrlResized:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.imageDataSrc,i=r.width,n=r.height,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),t.commit("currentActionInfo","Resizing image (base64)"),e.next=8,en.instance.requestResizedImageAsync(a,i,n);case 8:return s=e.sent,t.commit("_busyImage",!1),e.next=12,t.dispatch("multiInput/imageDataUrl",s,{root:!0});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log("[store][worker][setMultiInputImageUrlResized][Error]",e.t0),t.commit("error",e.t0);case 18:return e.prev=18,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(18);case 22:case"end":return e.stop()}},e,this,[[3,14,18,22]])}));function t(t,r){return e.apply(this,arguments)}return t}(),saveResultImage:function(){var e=Object(ar["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.name,i=r.imageFileName,!t.getters["busyImage"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),e.next=7,qa.imageBlobFromImageData(t.getters["results/imageData"](a));case 7:n=e.sent,Object(bi["saveAs"])(n,i);case 9:return e.prev=9,setTimeout(function(){t.commit("_busyImage",!1)},500),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[3,,9,12]])}));function t(t,r){return e.apply(this,arguments)}return t}()},bn={results:gn},wn={namespaced:!0,state:hn,getters:fn,mutations:yn,actions:vn,modules:bn},In=function(){function e(){Object(L["a"])(this,e)}return Object(E["a"])(e,null,[{key:"saveIdValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==r||t!=r)localStorage.setItem(e.toString(),t.toString());else{var a=e.toString();localStorage.getItem(a)&&localStorage.removeItem(a)}}},{key:"saveIdValueArr",value:function(e){var t=this;e.forEach(function(e){t.saveIdValue(e.id,e.value,e.defaultValue||(0===e.defaultValue?0:null))})}},{key:"_getValueById",value:function(e){var t=localStorage.getItem(e.toString());if(""===t)return t;if(null===t)return null;var r=Number(t);return isNaN(Number(r))?t:r}},{key:"getIdValueArr",value:function(e){var t=this,r=[];return e.forEach(function(e){var a=t._getValueById(e);(a||0===a)&&r.push({id:e,value:a})}),r}}]),e}(),_n={settings:new on,defaultSettings:null,activeTabIndexDetector:null,activeTabIndexStitcher:null,stitcherSettingsOn:!1,activeTabIndexMultiStitcher:!1,multiStitcherSettingsOn:!1},xn={param:function(e){return function(t){return e.settings.getParamValueById(t)}},paramDefault:function(e){return function(t){return e.settings.getParamDefaultValueById(t)}},settings:function(e){return e.settings},equalsDefault:function(e){return e.settings.equals(e.defaultSettings)},idValueArrExcludingDefaults:function(e){return e.settings.getIdValueArrExcludingDefaults()},activeTabIndexDetector:function(e){return e.activeTabIndexDetector},getCurrentDetTypeGroupKey:function(e){return e.settings.getCurrentDetTypeGroupKey()},activeTabIndexStitcher:function(e){return e.activeTabIndexStitcher},stitcherSettingsOn:function(e){return e.stitcherSettingsOn},multiStitcherSettingsOn:function(e){return e.multiStitcherSettingsOn},activeTabIndexMultiStitcher:function(e){return e.activeTabIndexMultiStitcher}},kn={param:function(e,t){var r=t.id,a=t.value;e.settings.setParamValueById(r,a)},params:function(e,t){e.settings.setByIdValueArr(t)},default:function(e){e.settings=new on},defaultSettings:function(e,t){e.defaultSettings=H()(t)},activeTabIndexDetector:function(e,t){e.activeTabIndexDetector=t},activeTabIndexStitcher:function(e,t){e.activeTabIndexStitcher=t},stitcherSettingsOn:function(e,t){e.stitcherSettingsOn=t},multiStitcherSettingsOn:function(e,t){e.multiStitcherSettingsOn=t},activeTabIndexMultiStitcher:function(e,t){e.activeTabIndexMultiStitcher=t}},Sn={init:function(e){var t=e.getters["settings"];e.commit("defaultSettings",t.getIdValueArr());var r=In.getIdValueArr(t.getIdArr());r=t.removeInvalidParams(r),e.commit("params",r)},param:function(e,t){var r=e.commit,a=e.getters,i=t.id,n=t.value,s=a["settings"];r("param",{id:i,value:n}),In.saveIdValue(i,n,s.getParamDefaultValueById(i));var o=s.getRelatingIdValue(i,n);o&&(r("param",{id:o.id,value:o.value}),In.saveIdValue(o.id,o.value,s.getParamDefaultValueById(o.id)))},default:function(e){var t=e.commit,r=e.getters;t("default");var a=r["settings"].getIdValueDefaultArr();In.saveIdValueArr(a)},activeTabIndexDetector:function(e,t){var r=e.commit;r("activeTabIndexDetector",t)},activeTabIndexStitcher:function(e,t){var r=e.commit;r("activeTabIndexStitcher",t)},stitcherSettingsOn:function(e,t){var r=e.commit;r("stitcherSettingsOn",t)},multiStitcherSettingsOn:function(e,t){var r=e.commit;r("multiStitcherSettingsOn",t)},activeTabIndexMultiStitcher:function(e,t){var r=e.commit;r("activeTabIndexMultiStitcher",t)}},Dn={namespaced:!0,state:_n,getters:xn,mutations:kn,actions:Sn},Tn=null,An={maxMessagesCount:50,messages:[],totalCount:0,infoMessafe:"",maxErrorMessagesCount:15,errorMessages:[],currentErrorMessage:""},On={messages:function(e){return e.messages},totalCount:function(e){return e.totalCount},errorMessages:function(e){return e.errorMessages},currentErrorMessage:function(e){return e.currentErrorMessage}},Vn={addMessage:function(e,t){e.maxMessagesCount==e.messages.length&&e.messages.shift(),e.messages.push((new Date).toLocaleTimeString()+": "+t),e.totalCount++},setInfoMessage:function(e,t){e.infoMessafe=t},addErrorMessage:function(e,t){e.maxErrorMessagesCount==e.errorMessages.length&&e.errorMessages.shift(),e.errorMessages.push((new Date).toLocaleTimeString()+": "+t),Tn&&(clearTimeout(Tn),Tn=null),e.currentErrorMessage=t,Tn=setTimeout(function(){e.currentErrorMessage=""},3e3)}},Cn={},Rn={namespaced:!0,state:An,getters:On,mutations:Vn,actions:Cn};a["a"].use($a["a"]);var jn=new $a["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{worker:wn,settings:Dn,input:oi,multiInput:vi,logs:Rn}}),Fn=r("9483");Object(Fn["a"])("".concat("/imgalign/","workbox-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].config.productionTip=!1,a["a"].prototype.$cvready={},a["a"].prototype.$cvready.cbs=[],a["a"].prototype.$cvready.addCb=function(e){a["a"].prototype.$cvready.cbs.push(e)},new a["a"]({router:Na,store:jn,render:function(e){return e(_e)}}).$mount("#app")},"5c22":function(e,t,r){e.exports=r.p+"img/mountains1.24b57b69.jpg"},"5ef7":function(e,t,r){},"5fba":function(e,t,r){e.exports=r.p+"img/mountains2.47f92173.jpg"},"62e0":function(e,t,r){"use strict";var a=r("7468"),i=r.n(a);i.a},6303:function(e,t,r){"use strict";var a=r("af3c"),i=r.n(a);i.a},7468:function(e,t,r){},"7a39":function(e,t,r){"use strict";var a=r("ccc0"),i=r.n(a);i.a},"7c24":function(e,t,r){"use strict";var a=r("5403"),i=r.n(a);i.a},"91c2":function(e,t,r){},"9b54":function(e,t,r){},"9c9a":function(e,t,r){"use strict";var a=r("db44"),i=r.n(a);i.a},a2ac:function(e,t,r){e.exports=r.p+"img/logo_200x200.3cb66bd7.png"},ac87:function(e,t,r){"use strict";var a=r("355c"),i=r.n(a);i.a},af3c:function(e,t,r){},ccc0:function(e,t,r){},d01a:function(e,t,r){"use strict";var a=r("9b54"),i=r.n(a);i.a},db44:function(e,t,r){},dce7:function(e,t,r){e.exports=r.p+"img/ms3.21ccf3d3.jpg"},f1ae:function(e,t,r){"use strict";var a=r("11a7"),i=r.n(a);i.a},f627:function(e,t,r){e.exports=r.p+"img/ms2.e94e24ee.jpg"},fcd5:function(e,t,r){"use strict";var a=r("91c2"),i=r.n(a);i.a}});
//# sourceMappingURL=app.8beada53.js.map